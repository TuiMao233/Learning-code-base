<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Vue3 渐进式前端框架开发 | Mr.Mao&#39;s blog</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="shortcut icon" type="image/x-icon" href="/mao-blog/favicon.ico">
    <meta name="description" content="For man is man and master of his fate.">
    
    <link rel="preload" href="/mao-blog/assets/css/0.styles.c7f09f7b.css" as="style"><link rel="preload" href="/mao-blog/assets/js/app.19e1b50c.js" as="script"><link rel="preload" href="/mao-blog/assets/js/4.512e8a4d.js" as="script"><link rel="preload" href="/mao-blog/assets/js/1.6b005ada.js" as="script"><link rel="preload" href="/mao-blog/assets/js/25.bccb3f04.js" as="script"><link rel="prefetch" href="/mao-blog/assets/js/10.8008c15a.js"><link rel="prefetch" href="/mao-blog/assets/js/11.e6d5e627.js"><link rel="prefetch" href="/mao-blog/assets/js/12.5df4cc14.js"><link rel="prefetch" href="/mao-blog/assets/js/13.64a3b0dc.js"><link rel="prefetch" href="/mao-blog/assets/js/14.92c69349.js"><link rel="prefetch" href="/mao-blog/assets/js/15.fcb00b5c.js"><link rel="prefetch" href="/mao-blog/assets/js/16.177fc3f8.js"><link rel="prefetch" href="/mao-blog/assets/js/17.35b5192e.js"><link rel="prefetch" href="/mao-blog/assets/js/18.4059f020.js"><link rel="prefetch" href="/mao-blog/assets/js/19.d0f23759.js"><link rel="prefetch" href="/mao-blog/assets/js/20.2d4db1fa.js"><link rel="prefetch" href="/mao-blog/assets/js/21.514837fa.js"><link rel="prefetch" href="/mao-blog/assets/js/22.27a37e8b.js"><link rel="prefetch" href="/mao-blog/assets/js/23.897a67bc.js"><link rel="prefetch" href="/mao-blog/assets/js/24.c649adb1.js"><link rel="prefetch" href="/mao-blog/assets/js/26.705ac85b.js"><link rel="prefetch" href="/mao-blog/assets/js/27.e4123e2d.js"><link rel="prefetch" href="/mao-blog/assets/js/28.46bcae57.js"><link rel="prefetch" href="/mao-blog/assets/js/29.c4272f05.js"><link rel="prefetch" href="/mao-blog/assets/js/3.2246673a.js"><link rel="prefetch" href="/mao-blog/assets/js/30.28bc60fe.js"><link rel="prefetch" href="/mao-blog/assets/js/31.c3758186.js"><link rel="prefetch" href="/mao-blog/assets/js/32.db3244fa.js"><link rel="prefetch" href="/mao-blog/assets/js/33.06b2e404.js"><link rel="prefetch" href="/mao-blog/assets/js/34.87d9e7a4.js"><link rel="prefetch" href="/mao-blog/assets/js/35.c126287d.js"><link rel="prefetch" href="/mao-blog/assets/js/36.8f3be9db.js"><link rel="prefetch" href="/mao-blog/assets/js/37.b916e469.js"><link rel="prefetch" href="/mao-blog/assets/js/38.d90b2cf2.js"><link rel="prefetch" href="/mao-blog/assets/js/39.6e0ceebe.js"><link rel="prefetch" href="/mao-blog/assets/js/40.1b64d216.js"><link rel="prefetch" href="/mao-blog/assets/js/41.ebf384c2.js"><link rel="prefetch" href="/mao-blog/assets/js/42.9881274f.js"><link rel="prefetch" href="/mao-blog/assets/js/43.53f0eb78.js"><link rel="prefetch" href="/mao-blog/assets/js/44.56761054.js"><link rel="prefetch" href="/mao-blog/assets/js/45.b0ff1d14.js"><link rel="prefetch" href="/mao-blog/assets/js/46.aaaf7c00.js"><link rel="prefetch" href="/mao-blog/assets/js/47.18cca51b.js"><link rel="prefetch" href="/mao-blog/assets/js/48.39030ea6.js"><link rel="prefetch" href="/mao-blog/assets/js/49.9ab0ecf9.js"><link rel="prefetch" href="/mao-blog/assets/js/5.8cda11d4.js"><link rel="prefetch" href="/mao-blog/assets/js/50.0bffed31.js"><link rel="prefetch" href="/mao-blog/assets/js/51.ff3d6c79.js"><link rel="prefetch" href="/mao-blog/assets/js/52.87903e4e.js"><link rel="prefetch" href="/mao-blog/assets/js/53.5759e67a.js"><link rel="prefetch" href="/mao-blog/assets/js/54.be8026fc.js"><link rel="prefetch" href="/mao-blog/assets/js/55.866a8231.js"><link rel="prefetch" href="/mao-blog/assets/js/56.e12d34a8.js"><link rel="prefetch" href="/mao-blog/assets/js/57.57fd273b.js"><link rel="prefetch" href="/mao-blog/assets/js/58.90ce6d0a.js"><link rel="prefetch" href="/mao-blog/assets/js/59.3863dc39.js"><link rel="prefetch" href="/mao-blog/assets/js/6.6d443000.js"><link rel="prefetch" href="/mao-blog/assets/js/60.9e201b5f.js"><link rel="prefetch" href="/mao-blog/assets/js/61.d56ed0f8.js"><link rel="prefetch" href="/mao-blog/assets/js/62.b21d1cc3.js"><link rel="prefetch" href="/mao-blog/assets/js/63.eadaa890.js"><link rel="prefetch" href="/mao-blog/assets/js/64.67bc0773.js"><link rel="prefetch" href="/mao-blog/assets/js/65.ea6aa7cc.js"><link rel="prefetch" href="/mao-blog/assets/js/66.cc349a1f.js"><link rel="prefetch" href="/mao-blog/assets/js/67.838b75e8.js"><link rel="prefetch" href="/mao-blog/assets/js/68.e59ea1bc.js"><link rel="prefetch" href="/mao-blog/assets/js/69.6ac56165.js"><link rel="prefetch" href="/mao-blog/assets/js/7.4209526f.js"><link rel="prefetch" href="/mao-blog/assets/js/70.0dc5fc42.js"><link rel="prefetch" href="/mao-blog/assets/js/71.a9ff44b1.js"><link rel="prefetch" href="/mao-blog/assets/js/72.bd59cddf.js"><link rel="prefetch" href="/mao-blog/assets/js/73.b6b0d409.js"><link rel="prefetch" href="/mao-blog/assets/js/74.92094ea4.js"><link rel="prefetch" href="/mao-blog/assets/js/75.57b289ff.js"><link rel="prefetch" href="/mao-blog/assets/js/76.fae4f14d.js"><link rel="prefetch" href="/mao-blog/assets/js/77.c4f1a7a5.js"><link rel="prefetch" href="/mao-blog/assets/js/78.72a68f19.js"><link rel="prefetch" href="/mao-blog/assets/js/79.42919070.js"><link rel="prefetch" href="/mao-blog/assets/js/8.23939aab.js"><link rel="prefetch" href="/mao-blog/assets/js/80.063e6e91.js"><link rel="prefetch" href="/mao-blog/assets/js/81.c0a3b3d7.js"><link rel="prefetch" href="/mao-blog/assets/js/9.cea725c3.js">
    <link rel="stylesheet" href="/mao-blog/assets/css/0.styles.c7f09f7b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-1156296a><div data-v-1156296a><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-1156296a data-v-1156296a><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-4e82dffc data-v-1156296a data-v-1156296a><h3 class="title" data-v-4e82dffc data-v-4e82dffc>Mr.Mao's blog</h3> <p class="description" data-v-4e82dffc data-v-4e82dffc>For man is man and master of his fate.</p> <label id="box" class="inputBox" data-v-4e82dffc data-v-4e82dffc><input type="password" value="" data-v-4e82dffc> <span data-v-4e82dffc>Konck! Knock!</span> <button data-v-4e82dffc>OK</button></label> <div class="footer" data-v-4e82dffc data-v-4e82dffc><span data-v-4e82dffc><i class="iconfont reco-theme" data-v-4e82dffc></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-4e82dffc>vuePress-theme-reco</a></span> <span data-v-4e82dffc><i class="iconfont reco-copyright" data-v-4e82dffc></i> <a data-v-4e82dffc><span data-v-4e82dffc>Mr.Mao</span>
            
          <span data-v-4e82dffc>2020 - </span>
          2021
        </a></span></div></div> <div class="hide" data-v-1156296a><header class="navbar" data-v-1156296a><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/mao-blog/" class="home-link router-link-active"><img src="/mao-blog/avatar.png" alt="Mr.Mao's blog" class="logo"> <span class="site-name">Mr.Mao's blog</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/mao-blog/" class="nav-link"><i class="iconfont reco-home"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-document"></i>
      软件开发
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/mao-blog/软件开发/前端笔记/01-HTML-超文本标记语言.html" class="nav-link"><i class="undefined"></i>
  前端开发
</a></li><li class="dropdown-item"><!----> <a href="/mao-blog/软件开发/后端笔记/01-php-后端应用.html" class="nav-link"><i class="undefined"></i>
  后端开发
</a></li><li class="dropdown-item"><!----> <a href="/mao-blog/软件开发/扩展笔记/01-Promise-异步解决方案.html" class="nav-link"><i class="undefined"></i>
  知识扩展
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-npm"></i>
      我的扩展
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/mao-blog/我的扩展/create-uniapp-view.html" class="nav-link"><i class="undefined"></i>
  快速创建视图 | create-uniapp-view
</a></li><li class="dropdown-item"><!----> <a href="/mao-blog/我的扩展/u-draw-poster/01-base-desc.html" class="nav-link"><i class="undefined"></i>
  多端海报绘制 | uni-draw-poster
</a></li><li class="dropdown-item"><!----> <a href="/mao-blog/我的扩展/form-strategy.html" class="nav-link"><i class="undefined"></i>
  表单策略验证 | form-strategy
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-date"></i>
      规划指南
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/mao-blog/规划指南/01-日常指标.html" class="nav-link"><i class="undefined"></i>
  生活指标
</a></li><li class="dropdown-item"><!----> <a href="/mao-blog/规划指南/02-总结与规划.html" class="nav-link"><i class="undefined"></i>
  总结与规划
</a></li><li class="dropdown-item"><!----> <a href="/mao-blog/个人记录/职场事项.html" class="nav-link"><i class="undefined"></i>
  职场 RULE
</a></li></ul></div></div><div class="nav-item"><a href="/mao-blog/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-1156296a></div> <aside class="sidebar" data-v-1156296a><div class="personal-info-wrapper" data-v-828910c6 data-v-1156296a><img src="/mao-blog/avatar.png" alt="author-avatar" class="personal-img" data-v-828910c6> <h3 class="name" data-v-828910c6>
    Mr.Mao
  </h3> <div class="num" data-v-828910c6><div data-v-828910c6><h3 data-v-828910c6>70</h3> <h6 data-v-828910c6>Articles</h6></div> <div data-v-828910c6><h3 data-v-828910c6>46</h3> <h6 data-v-828910c6>Tags</h6></div></div> <ul class="social-links" data-v-828910c6></ul> <hr data-v-828910c6></div> <nav class="nav-links"><div class="nav-item"><a href="/mao-blog/" class="nav-link"><i class="iconfont reco-home"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-document"></i>
      软件开发
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/mao-blog/软件开发/前端笔记/01-HTML-超文本标记语言.html" class="nav-link"><i class="undefined"></i>
  前端开发
</a></li><li class="dropdown-item"><!----> <a href="/mao-blog/软件开发/后端笔记/01-php-后端应用.html" class="nav-link"><i class="undefined"></i>
  后端开发
</a></li><li class="dropdown-item"><!----> <a href="/mao-blog/软件开发/扩展笔记/01-Promise-异步解决方案.html" class="nav-link"><i class="undefined"></i>
  知识扩展
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-npm"></i>
      我的扩展
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/mao-blog/我的扩展/create-uniapp-view.html" class="nav-link"><i class="undefined"></i>
  快速创建视图 | create-uniapp-view
</a></li><li class="dropdown-item"><!----> <a href="/mao-blog/我的扩展/u-draw-poster/01-base-desc.html" class="nav-link"><i class="undefined"></i>
  多端海报绘制 | uni-draw-poster
</a></li><li class="dropdown-item"><!----> <a href="/mao-blog/我的扩展/form-strategy.html" class="nav-link"><i class="undefined"></i>
  表单策略验证 | form-strategy
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-date"></i>
      规划指南
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/mao-blog/规划指南/01-日常指标.html" class="nav-link"><i class="undefined"></i>
  生活指标
</a></li><li class="dropdown-item"><!----> <a href="/mao-blog/规划指南/02-总结与规划.html" class="nav-link"><i class="undefined"></i>
  总结与规划
</a></li><li class="dropdown-item"><!----> <a href="/mao-blog/个人记录/职场事项.html" class="nav-link"><i class="undefined"></i>
  职场 RULE
</a></li></ul></div></div><div class="nav-item"><a href="/mao-blog/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div> <!----></nav> <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>前端笔记</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/01-html-chao-wen-ben-biao-ji-yu-yan.html" class="sidebar-link">HTML 超文本标记语言</a></li><li><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/02-css2-ying-yong.html" class="sidebar-link">CSS2 应用</a></li><li><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/03-css3-ying-yong.html" class="sidebar-link">CSS3 应用</a></li><li><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/04-less-cssyu-chu-li-yu-yan.html" class="sidebar-link">Less CSS预处理语言</a></li><li><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/05-javascript-ying-yong.html" class="sidebar-link">JavaScript 应用</a></li><li><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/06-javascript-shen-ru.html" class="sidebar-link">JavaScript 深入</a></li><li><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/07-javascript-xing-neng-you-hua.html" class="sidebar-link">JavaScript 性能优化</a></li><li><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/08-lodash-gong-ju-mo-kuai-ying-yong.html" class="sidebar-link">Lodash 简介</a></li><li><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/09-html5-javascript-ying-yong.html" class="sidebar-link">HTML5 JavaScript 应用</a></li><li><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/10-ajax-yi-bu-shu-ju-chuan-shu.html" class="sidebar-link">Ajax 异步数据传输</a></li><li><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/11-npm--bao-guan-li-gong-ju.html" class="sidebar-link">NPM  包管理工具</a></li><li><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/12-zepto-qian-duan-kuang-jia-kai-fa.html" class="sidebar-link">Zepto 前端框架开发</a></li><li><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/13-angularjs-qian-duan-kuang-jia-kai-fa-jiu-ban-.html" class="sidebar-link">AngularJS 前端框架开发(旧版)</a></li><li><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/14-ecmascript-6-8-biao-zhun.html" class="sidebar-link">ECMAScript 6</a></li><li><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/15-javascript-mo-kuai-hua-ying-yong.html" class="sidebar-link">JavaScript 模块化应用</a></li><li><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/16-eslint-dai-ma-jian-ce-gong-ju.html" class="sidebar-link">Eslint 代码检测工具</a></li><li><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/17-git-ban-ben-kong-zhi-xi-tong.html" class="sidebar-link">Git 版本控制系统</a></li><li><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/18-grunt-kai-fa-yu-sheng-chan-huan-jing.html" class="sidebar-link">Grunt 开发与生产环境</a></li><li><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/19-gulp-kai-fa-yu-sheng-chan-huan-jing.html" class="sidebar-link">Gulp 开发与生产环境</a></li><li><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/20-webpack-kai-fa-huan-jing.html" class="sidebar-link">webpack 开发环境</a></li><li><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/21-webpack-sheng-chan-huan-jing.html" class="sidebar-link">webpack 生产环境</a></li><li><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/22-webpack-you-hua-huan-jing.html" class="sidebar-link">webpack 优化环境</a></li><li><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/23-webpack-quan-mian-fen-xi.html" class="sidebar-link">react-cli 全面分析</a></li><li><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/24-webpack-xiang-xi-pei-zhi.html" class="sidebar-link">webpack 详细配置</a></li><li><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/25-react-qian-duan-kuang-jia-kai-fa.html" class="sidebar-link">React 前端框架开发</a></li><li><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/26-reacthooks-v16.8xin-te-xing.html" class="sidebar-link">ReactHooks v16.8新特性</a></li><li><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/27-vue2-jian-jin-shi-qian-duan-kuang-jia-kai-fa.html" class="sidebar-link">Vue2 渐进式前端框架开发</a></li><li><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/28-vue3-jian-jin-shi-qian-duan-kuang-jia-kai-fa.html" aria-current="page" class="active sidebar-link">Vue3 渐进式前端框架开发</a></li><li><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/29-axios-jie-kou-qing-qiu-ku.html" class="sidebar-link">axios 接口请求库</a></li><li><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/30-mobile.app-yuan-sheng-webappkai-fa.html" class="sidebar-link">H5原生WebAPP开发</a></li><li><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/31-wei-xin-yuan-sheng-xiao-cheng-xu-kai-fa.html" class="sidebar-link">微信原生小程序开发</a></li><li><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/32-mpvue-xiao-cheng-xu-kai-fa.html" class="sidebar-link">mpvue 小程序开发</a></li><li><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/33-uniapp-duo-duan-ying-yong-kai-fa.html" class="sidebar-link">uniapp 多端应用开发</a></li><li><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/34-wei-xin-gong-zhong-hao-fu-wu-kai-fa.html" class="sidebar-link">微信公众号服务开发</a></li><li><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/35-uniapp-duo-duan-ying-yong-kai-fa.html" class="sidebar-link">uniapp 多端应用开发</a></li><li><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/36-javascript-she-ji-mo-shi.html" class="sidebar-link">JavaScript 设计模式</a></li><li><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/37-typescript-ying-yong.html" class="sidebar-link">TypeScript 应用</a></li><li><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/38-esmascript-8-11-biao-zhun.html" class="sidebar-link">ESMAScript 8</a></li><li><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/39-jest-zi-dong-hua-bu-shu-ce-shi.html" class="sidebar-link">Jest 自动化部署测试</a></li><li><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/40-vite-shi-yong-yu-yuan-li-fen-xi.html" class="sidebar-link">Vite 使用与原理分析</a></li><li><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/41-ji-shu-zhan-gou-jian-fang-an.html" class="sidebar-link">技术栈构建方案</a></li></ul></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-4e82dffc data-v-1156296a><h3 class="title" data-v-4e82dffc data-v-4e82dffc>Vue3 渐进式前端框架开发</h3> <!----> <label id="box" class="inputBox" data-v-4e82dffc data-v-4e82dffc><input type="password" value="" data-v-4e82dffc> <span data-v-4e82dffc>Konck! Knock!</span> <button data-v-4e82dffc>OK</button></label> <div class="footer" data-v-4e82dffc data-v-4e82dffc><span data-v-4e82dffc><i class="iconfont reco-theme" data-v-4e82dffc></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-4e82dffc>vuePress-theme-reco</a></span> <span data-v-4e82dffc><i class="iconfont reco-copyright" data-v-4e82dffc></i> <a data-v-4e82dffc><span data-v-4e82dffc>Mr.Mao</span>
            
          <span data-v-4e82dffc>2020 - </span>
          2021
        </a></span></div></div> <div data-v-1156296a><main class="page"><section><div class="page-title"><h1 class="title">Vue3 渐进式前端框架开发</h1> <div data-v-1ff7123e><i class="iconfont reco-account" data-v-1ff7123e><span data-v-1ff7123e>Mr.Mao</span></i> <i class="iconfont reco-date" data-v-1ff7123e><span data-v-1ff7123e>11/1/2020</span></i> <i class="iconfont reco-eye" data-v-1ff7123e><span id="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/28-vue3-jian-jin-shi-qian-duan-kuang-jia-kai-fa.html" data-flag-title="Your Article Title" class="leancloud-visitors" data-v-1ff7123e><a class="leancloud-visitors-count" style="font-size:.9rem;font-weight:normal;color:#999;"></a></span></i> <i class="tags iconfont reco-tag" data-v-1ff7123e><span class="tag-item" data-v-1ff7123e>vue3</span></i></div></div> <div class="theme-reco-content content__default"><h2 id="vue3-简述"><a href="#vue3-简述" class="header-anchor">#</a> Vue3 简述</h2> <h3 id="vue3-的一些新特性"><a href="#vue3-的一些新特性" class="header-anchor">#</a> Vue3 的一些新特性</h3> <p>必须要夸一夸 Vue3，它真实可谓“千呼万唤使出来”，听说是尤大神每天抱着孩子完成的。故事已经不能说明 Vue3 的伟大了，我们用下面一组数字来了解一下 Vue3。</p> <blockquote><p>Vue3：两年开发，99 位程序员成为贡献者，2600 次提交，628 次 PR</p></blockquote> <p>这些数字可以看出 Vue3 的工作量之大，我在一年前就开始关注 Vue3 的开发进展，虽然没成为 Vue3 的贡献者之一，但是我热爱的心不可否认。</p> <blockquote><p>官方网站地址: v3.vuejs.org</p></blockquote> <p><img src="https://newimg.jspang.com/Vue3_new01.png" alt="Vue3新特性"></p> <ul><li>首先是向下兼容，Vue3 支持大多数 Vue2 的特性。我们同事甚至开玩笑说，我就拿 Vue2 的语法开发 Vue3，也是没有任何问题的。</li> <li>性能的提升，每个人都希望使用的框架更快，更轻。Vue3 做到了，给开发者一个极致的体验。官方网站给出的数据是：打包大小减少 41%，初次渲染快 55%，更新快 133%，内存使用减少 54%。</li> <li>新推出的<code>Composition API</code> ，在 Vue2 中遇到的问题就是复杂组件的代码变的非常麻烦，甚至不可维护。说白了就是封装不好，重用不畅。这个<code>Composition API</code>一推出，立马解决了这个问题，本套课程中也会重点介绍这部分内容。它是一系列 API 的合集。</li> <li>其他新特性：Teleport(瞬移组件)、Suspense(解决异步加载组件问题)和全局 API 的修改和优化。</li> <li>更好<code>TypeScript</code>支持，我以前在开发 Vue2 的时候，是不适用<code>TypeScript</code>的，因为集成时很困难，疼点太多。但 Vue3 解决了这个问题，Vue3 的源代码就是使用<code>TypeScript</code>进行开发的。所以在新的版本上使用<code>TS</code>也更加顺畅无阻。</li></ul> <blockquote><p>B 站 Vue3 发布会视频：https://www.bilibili.com/video/BV1iA411J7cA?from=search&amp;seid=2979047174353974296</p></blockquote> <p>####### ###</p> <h3 id="全局-api-的重大更改"><a href="#全局-api-的重大更改" class="header-anchor">#</a> 全局 API 的重大更改</h3> <h4 id="全局声明应用更换"><a href="#全局声明应用更换" class="header-anchor">#</a> 全局声明应用更换</h4> <p>Vue 2.x 有许多全局 API 和配置，这些 API 和配置可以全局改变 Vue 的行为。例如，Vue.use，Vue.component，Vue.directive等等。虽然这种声明方式很方便，但它也会导致一些问题。从技术上讲，Vue 2 没有“app”的概念，我们定义的应用只是通过 <code>new Vue()</code> 创建的根 Vue 实例。测试期间，全局配置很容易意外地污染其他测试用例。有些 API 像 <code>Vue.use</code> 以及 <code>Vue.mixin</code> 甚至连恢复效果的方法都没有，这使得涉及插件的测试特别棘手。实际上，vue-test-utils 必须实现一个特殊的 API <code>createLocalVue</code> 来处理此问题，了避免这些问题，在 Vue 3 中我们引入<code>createApp</code>的一个全新API</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">createApp</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>应用实例暴露当前全局 API 的子集，经验法则是，任何全局改变 Vue 行为的 API 现在都会移动到应用实例上，以下是当前全局 API 及其相应实例 API 的表：</p> <table><thead><tr><th>2.x 全局 API</th> <th>3.x 实例 API (<code>app</code>)</th></tr></thead> <tbody><tr><td>Vue.config</td> <td>app.config</td></tr> <tr><td>Vue.config.productionTip</td> <td><em>removed</em> (<a href="https://v3.cn.vuejs.org/guide/migration/global-api.html#config-productiontip-removed" target="_blank" rel="noopener noreferrer">见下方<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>)</td></tr> <tr><td>Vue.config.ignoredElements</td> <td>app.config.isCustomElement (<a href="https://v3.cn.vuejs.org/guide/migration/global-api.html#config-ignoredelements-is-now-config-iscustomelement" target="_blank" rel="noopener noreferrer">见下方<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>)</td></tr> <tr><td>Vue.component</td> <td>app.component</td></tr> <tr><td>Vue.directive</td> <td>app.directive</td></tr> <tr><td>Vue.mixin</td> <td>app.mixin</td></tr> <tr><td>Vue.use</td> <td>app.use (<a href="https://v3.cn.vuejs.org/guide/migration/global-api.html#a-note-for-plugin-authors" target="_blank" rel="noopener noreferrer">见下方<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>)</td></tr></tbody></table> <p>由于 <code>use</code> 全局 API 在 Vue 3 中不再使用，此方法将停止工作并停止调用 <code>Vue.use()</code> 现在将触发警告，于是，开发者必须在应用程序实例上显式指定使用此插件：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">createApp</span><span class="token punctuation">(</span>MyApp<span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>VueRouter<span class="token punctuation">)</span>
</code></pre></div><h4 id="next-函数的语法改变"><a href="#next-函数的语法改变" class="header-anchor">#</a> next 函数的语法改变</h4> <p>在 Vue 3 中，全局和内部 API 都经过了重构，并考虑到了 tree-shaking 的支持。因此，全局 API 现在只能作为 ES 模块构建的命名导出进行访问。例如，我们之前的片段现在应该如下所示：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> nextTick <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token function">nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 一些和DOM有关的东西</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="模板指令的重大更改"><a href="#模板指令的重大更改" class="header-anchor">#</a> 模板指令的重大更改</h3> <h4 id="组件-v-model-的用法更改"><a href="#组件-v-model-的用法更改" class="header-anchor">#</a> 组件 <code>v-model</code> 的用法更改</h4> <p>在某些情况下，我们可能需要对某一个 prop 进行“双向绑定”(除了前面用 <code>v-model</code> 绑定 prop 的情况)。为此，我们建议使用 <code>update:myPropName</code> 抛出事件。例如，对于在上一个示例中带有 <code>title</code> prop 的 <code>ChildComponent</code>，我们可以通过下面的方式将分配新 value 的意图传达给父级：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'update:title'</span><span class="token punctuation">,</span> newValue<span class="token punctuation">)</span>
</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 如果需要的话，父级可以监听该事件并更新本地 data property。例如： --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ChildComponent</span> <span class="token attr-name">:title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pageTitle<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">@update:</span>title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pageTitle = $event<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token comment">&lt;!-- 为了方便起见，我们可以使用 .sync 修饰符来缩写，如下所示： --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ChildComponent</span> <span class="token attr-name">:title.sync</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pageTitle<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><p>在 3.x 中，自定义组件上的 <code>v-model</code> 相当于传递了 <code>modelValue</code> prop 并接收抛出的 <code>update:modelValue</code> 事件：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ChildComponent</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pageTitle<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token comment">&lt;!-- 简写: --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ChildComponent</span>
  <span class="token attr-name">:modelValue</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pageTitle<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name"><span class="token namespace">@update:</span>modelValue</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pageTitle = $event<span class="token punctuation">&quot;</span></span>
<span class="token punctuation">/&gt;</span></span>
</code></pre></div><p>若需要更改 <code>model</code> 名称，而不是更改组件内的 <code>model</code> 选项，那么现在我们可以将一个 <em>argument</em> 传递给 <code>model</code>：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ChildComponent</span> <span class="token attr-name"><span class="token namespace">v-model:</span>title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pageTitle<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token comment">&lt;!-- 简写: --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ChildComponent</span> <span class="token attr-name">:title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pageTitle<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">@update:</span>title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pageTitle = $event<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><p><img src="https://v3.cn.vuejs.org/images/v-bind-instead-of-sync.png" alt="v-bind anatomy"></p> <p>这也可以作为 <code>.sync</code> 修饰符的替代，而且允许我们在自定义组件上使用多个 <code>v-model</code>。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ChildComponent</span> <span class="token attr-name"><span class="token namespace">v-model:</span>title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pageTitle<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">v-model:</span>content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pageContent<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

<span class="token comment">&lt;!-- 简写： --&gt;</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ChildComponent</span>
  <span class="token attr-name">:title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pageTitle<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name"><span class="token namespace">@update:</span>title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pageTitle = $event<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">:content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pageContent<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name"><span class="token namespace">@update:</span>content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pageContent = $event<span class="token punctuation">&quot;</span></span>
<span class="token punctuation">/&gt;</span></span>
</code></pre></div><h4 id="模板与其他指令-key-值用法更改"><a href="#模板与其他指令-key-值用法更改" class="header-anchor">#</a> 模板与其他指令 key 值用法更改</h4> <p>在 Vue 2.x 中 <code>&lt;template&gt;</code> 标签不能拥有 <code>key</code>。不过你可以为其每个子节点分别设置 <code>key</code>。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- Vue 2.x --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in list<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.id<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.id<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>在 Vue 3.x 中 <code>key</code> 则应该被设置在 <code>&lt;template&gt;</code> 标签上。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- Vue 3.x --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in list<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.id<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>类似地，当使用 <code>&lt;template v-for&gt;</code> 时存在使用 <code>v-if</code> 的子节点，<code>key</code> 应改为设置在 <code>&lt;template&gt;</code> 标签上。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- Vue 2.x --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in list<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.isVisible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.id<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">v-else</span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.id<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- Vue 3.x --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in list<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.id<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.isVisible<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">v-else</span><span class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="v-for-中的-ref-不在返回数组"><a href="#v-for-中的-ref-不在返回数组" class="header-anchor">#</a> v-for 中的 Ref 不在返回数组</h4> <p>在 Vue 2 中，在 <code>v-for</code> 里使用的 <code>ref</code> attribute 会用 ref 数组填充相应的 <code>$refs</code> property。当存在嵌套的 <code>v-for</code> 时，这种行为会变得不明确且效率低下。</p> <p>在 Vue 3 中，这样的用法将不再在 <code>$ref</code> 中自动创建数组。要从单个绑定获取多个 ref，请将 <code>ref</code> 绑定到一个更灵活的函数上 (这是一个新特性)：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in list<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>setItemRef<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> itemRefs<span class="token operator">:</span> Element<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token function-variable function">setItemRef</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">el<span class="token operator">:</span> Element</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> itemRefs<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      setItemRef
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scss<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="异步组件的重大更改"><a href="#异步组件的重大更改" class="header-anchor">#</a> 异步组件的重大更改</h3> <p>以前，异步组件是通过将组件定义为返回 Promise 的函数来创建的，例如：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">asyncPage</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./NextPage.vue'</span><span class="token punctuation">)</span>
</code></pre></div><p>或者，对于带有选项的更高阶的组件语法：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> asyncPage <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./NextPage.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  delay<span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span>
  timeout<span class="token operator">:</span> <span class="token number">3000</span><span class="token punctuation">,</span>
  error<span class="token operator">:</span> ErrorComponent<span class="token punctuation">,</span>
  loading<span class="token operator">:</span> LoadingComponent
<span class="token punctuation">}</span>
</code></pre></div><p>现在，在 Vue 3 中，由于函数式组件被定义为纯函数，因此异步组件的定义需要通过将其包装在新的 <code>defineAsyncComponent</code> 助手方法中来显式地定义：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineAsyncComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> ErrorComponent <span class="token keyword">from</span> <span class="token string">'./components/ErrorComponent.vue'</span>
<span class="token keyword">import</span> LoadingComponent <span class="token keyword">from</span> <span class="token string">'./components/LoadingComponent.vue'</span>

<span class="token comment">// 不带选项的异步组件</span>
<span class="token keyword">const</span> asyncPage <span class="token operator">=</span> <span class="token function">defineAsyncComponent</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./NextPage.vue'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">// 带选项的异步组件</span>
<span class="token keyword">const</span> asyncPageWithOptions <span class="token operator">=</span> <span class="token function">defineAsyncComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function-variable function">loader</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./NextPage.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  delay<span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span>
  timeout<span class="token operator">:</span> <span class="token number">3000</span><span class="token punctuation">,</span>
  errorComponent<span class="token operator">:</span> ErrorComponent<span class="token punctuation">,</span>
  loadingComponent<span class="token operator">:</span> LoadingComponent
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="移除-api"><a href="#移除-api" class="header-anchor">#</a> 移除 API</h3> <ul><li><a href="https://v3.cn.vuejs.org/guide/migration/keycode-modifiers.html" target="_blank" rel="noopener noreferrer"><code>keyCode</code> 支持作为 <code>v-on</code> 的修饰符<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://v3.cn.vuejs.org/guide/migration/events-api.html" target="_blank" rel="noopener noreferrer">$on，$off 和 $once 实例方法<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://v3.cn.vuejs.org/guide/migration/filters.html" target="_blank" rel="noopener noreferrer">过滤<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://v3.cn.vuejs.org/guide/migration/inline-template-attribute.html" target="_blank" rel="noopener noreferrer">内联模板 attribute<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><code>$destroy</code> 实例方法。用户不应再手动管理单个 Vue 组件的生命周期。</li></ul> <h3 id="支持的库"><a href="#支持的库" class="header-anchor">#</a> 支持的库</h3> <p>所有的官方库和工具现在都支持 Vue 3，但大多数仍然处于 beta 状态，并在 NPM 的 <code>next</code> dist 标签下发布。<strong>我们正计划在 2020 年底前稳定所有项目，并将其转换为使用 <code>latest</code> 的 dist 标签</strong>。</p> <h4 id="vue-cli"><a href="#vue-cli" class="header-anchor">#</a> Vue CLI</h4> <p>从 v4.5.0 开始，<code>vue-cli</code> 现在提供了内置选项，可在创建新项目时选择 Vue 3 预设。现在可以升级 <code>vue-cli</code> 并运行 <code>vue create</code> 来创建 Vue 3 项目。</p> <h4 id="vue-router"><a href="#vue-router" class="header-anchor">#</a> Vue Router</h4> <p>Vue Router 4.0 提供了 Vue 3 支持，并有许多突破性的变化，查看 <a href="https://github.com/vuejs/vue-router-next#vue-router-next-" target="_blank" rel="noopener noreferrer">README<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 中完整的细节，</p> <ul><li><a href="https://www.npmjs.com/package/vue-router/v/next" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/npm/v/vue-router/next.svg" alt="beta"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/vuejs/vue-router-next" target="_blank" rel="noopener noreferrer">Github<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/vuejs/rfcs/pulls?q=is%3Apr+is%3Amerged+label%3Arouter" target="_blank" rel="noopener noreferrer">RFCs<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h4 id="vuex"><a href="#vuex" class="header-anchor">#</a> Vuex</h4> <p>Vuex 4.0 提供了 Vue 3 支持，其 API 与 3.x 基本相同。唯一的突破性变化是<a href="https://github.com/vuejs/vuex/tree/4.0#breaking-changes" target="_blank" rel="noopener noreferrer">插件的安装方式<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <ul><li><a href="https://www.npmjs.com/package/vuex/v/next" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/npm/v/vuex/next.svg" alt="beta"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/vuejs/vuex/tree/4.0" target="_blank" rel="noopener noreferrer">Github<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h4 id="devtools-extension"><a href="#devtools-extension" class="header-anchor">#</a> Devtools Extension</h4> <p>我们正在开发一个新版本的 Devtools，它有一个新的 UI 和经过重构的内部结构，以支持多个 Vue 版本。新版本目前处于测试阶段，目前只支持 Vue 3。Vuex 和路由器的集成也在进行中。</p> <ul><li>Chrome：<a href="https://chrome.google.com/webstore/detail/vuejs-devtools/ljjemllljcmogpfapbkkighbhhppjdbg?hl=en" target="_blank" rel="noopener noreferrer">从 Chrome web 商店中安装<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <ul><li>提示：beta 版本可能与 devtools 的稳定版本冲突，因此你可能需要暂时禁用稳定版本，以便 beta 版本正常工作。</li></ul></li> <li>Firefox：<a href="https://github.com/vuejs/vue-devtools/releases/tag/v6.0.0-beta.2" target="_blank" rel="noopener noreferrer">下载签名扩展<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> (assets 下的 <code>.xpi</code> 文件)</li></ul> <h4 id="ide-支持"><a href="#ide-支持" class="header-anchor">#</a> IDE 支持</h4> <p>推荐使用 <a href="https://code.visualstudio.com/" target="_blank" rel="noopener noreferrer">VSCode<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 和我们官方拓展 <a href="https://marketplace.visualstudio.com/items?itemName=octref.vetur" target="_blank" rel="noopener noreferrer">Vetur<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，它为 Vue 3 提供了全面的 IDE 支持</p> <h2 id="vue-基础命令-对象"><a href="#vue-基础命令-对象" class="header-anchor">#</a> Vue 基础命令&amp;对象</h2> <h3 id="vue-html指令"><a href="#vue-html指令" class="header-anchor">#</a> Vue-html指令</h3> <ol><li><code>v-text</code>：更新元素的textContent</li> <li><code>v-html</code>：更新元素的innerHTML</li> <li><code>v-if</code>：如果为true, 当前标签才会输出到页面</li> <li><code>v-else</code>：如果为false, 当前标签才会输出到页面</li> <li><code>v-show</code>：通过控制display 样式来控制显示/隐藏</li> <li><code>v-for</code>：遍历数组/对象</li> <li><code>v-on</code>：绑定事件监听, 一般简写为@</li> <li><code>v-bind</code>：标签属性绑定解析表达式, 可以省略v-bind</li> <li><code>v-model</code>：双向数据绑定</li> <li><code>ref</code>：指定唯一标识, vue 对象通过$els 属性访问这个元素对象</li> <li><code>v-cloak</code>：防止闪现, 与css 配合: [v-cloak] { display: none }</li> <li><code>setup</code>: 发送ajax请求, 启动定时器等异步任务</li> <li><code>onBeforeUnmount</code>: 做收尾工作, 如: 清除定时器</li></ol> <h3 id="vue-切换显示动画"><a href="#vue-切换显示动画" class="header-anchor">#</a> Vue 切换显示动画</h3> <p>Vue transition 允许我们只设置隐藏或者显示的样式，这样切换的时候，也会有过渡的效果。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transition</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-show</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>fool<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>666<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>transition</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">.[name]-enter-active, .[name]-leave-active</span><span class="token punctuation">{</span><span class="token comment">/*显示/隐藏的过渡样式*/</span><span class="token punctuation">}</span>
<span class="token selector">.[name]-enter-from, .[name]-leave-to</span> <span class="token punctuation">{</span><span class="token comment">/*隐藏的样式*/</span><span class="token punctuation">}</span>
<span class="token selector">.[name]-enter-top, .[name]-leave-from</span> <span class="token punctuation">{</span><span class="token comment">/*显示的样式*/</span><span class="token punctuation">}</span>
</code></pre></div><h3 id="vue-括号表达式"><a href="#vue-括号表达式" class="header-anchor">#</a> Vue 括号表达式</h3> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{title}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>(item, index) in 6<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>index<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{item}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="vue-事件修饰符"><a href="#vue-事件修饰符" class="header-anchor">#</a> Vue 事件修饰符</h3> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 阻止单击事件继续传播 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">@click.stop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>doThis<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 提交事件不再重载页面 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">@submit.prevent</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onSubmit<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 修饰符可以串联 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">@click.stop.prevent</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>doThat<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 只有修饰符 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">@submit.prevent</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 添加事件监听器时使用事件捕获模式 --&gt;</span>
<span class="token comment">&lt;!-- 即内部元素触发的事件先在此处理，然后才交由内部元素进行处理 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">@click.capture</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>doThis<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 只当在 event.target 是当前元素自身时触发处理函数 --&gt;</span>
<span class="token comment">&lt;!-- 即事件不是从内部元素触发的 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">@click.self</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>doThat<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 滚动事件的默认行为 (即滚动行为) 将会立即触发 --&gt;</span>
<span class="token comment">&lt;!-- 而不会等待 `onScroll` 完成  --&gt;</span>
<span class="token comment">&lt;!-- 这其中包含 `event.preventDefault()` 的情况 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">@scroll.passive</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onScroll<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="vue-按键修饰符"><a href="#vue-按键修饰符" class="header-anchor">#</a> Vue 按键修饰符</h3> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 只有在 `key` 是 `Enter` 时调用 `vm.submit()` --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name"><span class="token namespace">v-on:</span>keyup.enter</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
.enter	.tab	.delete (捕获“删除”和“退格”键)	.esc	.space	.up	.down	.left	.right
</code></pre></div><h3 id="vue-定义响应式数据"><a href="#vue-定义响应式数据" class="header-anchor">#</a> Vue 定义响应式数据</h3> <h4 id="定义数据-define"><a href="#定义数据-define" class="header-anchor">#</a> 定义数据(define)</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> reactive<span class="token punctuation">,</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 定义单个响应式数据</span>
    <span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 通过改变count.value发生响应式变化</span>
    count<span class="token punctuation">.</span>value<span class="token operator">++</span><span class="token punctuation">;</span>

    <span class="token comment">// 以对象形式定义响应式数据</span>
    <span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span> count<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 通过改变对象发生响应式变化</span>
    state<span class="token punctuation">.</span>count<span class="token operator">++</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      count<span class="token punctuation">,</span>
      state
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="定义数据-setup"><a href="#定义数据-setup" class="header-anchor">#</a> 定义数据(setup)</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> reactive<span class="token punctuation">,</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// 定义单个响应式数据</span>
<span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 通过改变count.value发生响应式变化</span>
count<span class="token punctuation">.</span>value<span class="token operator">++</span><span class="token punctuation">;</span>

<span class="token comment">// 以对象形式定义响应式数据</span>
<span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span> count<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 通过改变对象发生响应式变化</span>
state<span class="token punctuation">.</span>count<span class="token operator">++</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="模板中使用"><a href="#模板中使用" class="header-anchor">#</a> 模板中使用</h4> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>{{ count }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span> {{ state.count }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><a href="%E8%AF%A5%60flush%60%E9%80%89%E9%A1%B9%E8%BF%98%E6%8E%A5%E5%8F%97%60'sync'%60%EF%BC%8C%E8%BF%99%E5%B0%86%E5%BC%BA%E5%88%B6%E5%A7%8B%E7%BB%88%E5%90%8C%E6%AD%A5%E8%A7%A6%E5%8F%91%E6%95%88%E6%9E%9C%E3%80%82%E4%BD%86%E6%98%AF%EF%BC%8C%E8%BF%99%E6%95%88%E7%8E%87%E4%BD%8E%E4%B8%8B%EF%BC%8C%E5%BA%94%E5%B0%BD%E9%87%8F%E4%B8%8D%E4%BD%BF%E7%94%A8%E3%80%82">^注意</a>: toRef 可以用来为一个 reactive 对象的属性创建一个 ref。这个 ref 可以被传递并且能够保持响应性。</p> <h3 id="vue-外置组合函数"><a href="#vue-外置组合函数" class="header-anchor">#</a> Vue 外置组合函数</h3> <h4 id="计算属性值-computed"><a href="#计算属性值-computed" class="header-anchor">#</a> 计算属性值 (computed)</h4> <h5 id="computed-函数-计算属性"><a href="#computed-函数-计算属性" class="header-anchor">#</a> computed 函数 计算属性</h5> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  姓：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>firstName<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/&gt;</span></span>
  名：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>lastName<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/&gt;</span></span>
  姓名(单向)：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Name<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> computed<span class="token punctuation">,</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> firstName <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&quot;Aaa&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> lastName <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&quot;bbbB&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> firstName<span class="token punctuation">.</span>value <span class="token operator">+</span> <span class="token string">&quot;  &quot;</span> <span class="token operator">+</span> lastName<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h5 id="computed-对象-监视读写"><a href="#computed-对象-监视读写" class="header-anchor">#</a> computed 对象 监视读写</h5> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  姓：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>firstName<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/&gt;</span></span>
  名：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>lastName<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/&gt;</span></span>
  姓名(单向)：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> computed<span class="token punctuation">,</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> firstName <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&quot;Aaa&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> lastName <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&quot;bbbB&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// 回调函数,当需要读取当前属性值时回调,根据相关的数据计算并返回当前属性的值</span>
  <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> firstName<span class="token punctuation">.</span>value <span class="token operator">+</span> <span class="token string">&quot;|&quot;</span> <span class="token operator">+</span> lastName<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 回调函数,当属性值发生改变时回调,更新相关的属性数据</span>
  <span class="token comment">// value就是name的最新属性值</span>
  <span class="token function">set</span><span class="token punctuation">(</span>value<span class="token operator">:</span> string<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> names <span class="token operator">=</span> value<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;|&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    firstName<span class="token punctuation">.</span>value <span class="token operator">=</span> names<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
    lastName<span class="token punctuation">.</span>value <span class="token operator">=</span> names<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h5 id="computed-替换过滤器"><a href="#computed-替换过滤器" class="header-anchor">#</a> computed 替换过滤器</h5> <p>Filters 已从 Vue 3.0 中删除，不再受支持。在 3.x 中，filters 已删除，不再受支持。相反，官方建议用方法调用或计算属性替换它们。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// filters.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> computed <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">value<span class="token operator">:</span> Ref</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">&quot;...&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="收集依赖并监视-effect"><a href="#收集依赖并监视-effect" class="header-anchor">#</a> 收集依赖并监视(effect)</h4> <p>watchEffect会自动收集使用依赖并立即执行传入的一个函数，并响应式追踪其依赖，并在其依赖变更时重新运行该函数。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> watchEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> firstName <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&quot;Aaa&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> lastName <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&quot;bbbB&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// watchEffect会自动收集使用依赖</span>
<span class="token comment">// 当firstName与lastName改变时执行监视函数</span>
<span class="token function">watchEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">.</span>value <span class="token operator">=</span> firstName<span class="token punctuation">.</span>value <span class="token operator">+</span> <span class="token string">&quot;|&quot;</span> <span class="token operator">+</span> lastName<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h5 id="停止监视"><a href="#停止监视" class="header-anchor">#</a> 停止监视</h5> <p>watchEffect 返回停止函数，可以调用该函数以显式停止观察程序：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> watchEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 接收停止函数</span>
<span class="token keyword">const</span> stop <span class="token operator">=</span> <span class="token function">watchEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;count：&quot;</span><span class="token punctuation">,</span> count<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
count<span class="token punctuation">.</span>value<span class="token operator">++</span><span class="token punctuation">;</span>
<span class="token comment">// 停止监视</span>
<span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h5 id="废弃钩子"><a href="#废弃钩子" class="header-anchor">#</a> 废弃钩子</h5> <p>watchEffect 第一个参数接收值为函数钩子，该钩子会在该 watchEffect 废弃时调用。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">watchEffect</span><span class="token punctuation">(</span><span class="token parameter">onInvalidate</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">onInvalidate</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h5 id="更新模式"><a href="#更新模式" class="header-anchor">#</a> 更新模式</h5> <p>在组件更新后需要重新运行观察者效果的情况下，我们可以通过选项传递一个附加<code>options</code>对象<code>flush</code>（默认为<code>'pre'</code>）：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">watchEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">/* ... */</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> flush<span class="token operator">:</span> <span class="token string">'post'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h5 id="看守调试"><a href="#看守调试" class="header-anchor">#</a> 看守调试</h5> <p><code>onTrack</code>和<code>onTrigger</code>选项可以用来调试观察者的行为。</p> <ul><li><code>onTrack</code> 当将响应式属性或ref跟踪为依赖项时将被调用</li> <li><code>onTrigger</code> 当监视者回调由依赖项的变化触发时将被调用</li></ul> <p>这两个回调都将接收到一个调试器事件，该事件包含有关所依赖项的信息。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">watchEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">/* ... */</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> 
  <span class="token function">onTrack</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">onTrigger</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="指定数据源监视-watch"><a href="#指定数据源监视-watch" class="header-anchor">#</a> 指定数据源监视(watch)</h4> <p>watch 函数用来侦听特定的数据源，并在回调函数中执行副作用。默认情况是懒执行的，也就是说仅在侦听的源变更时才执行回调。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> watch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// watch(ref, fn, ?options) 对count进行监视, 值改变时触发</span>
<span class="token function">watch</span><span class="token punctuation">(</span>count<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> oldValue</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;count值发生改变&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;新值为: &quot;</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;旧值为: &quot;</span><span class="token punctuation">,</span> oldValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
count<span class="token punctuation">.</span>value<span class="token operator">++</span>
</code></pre></div><p>watch 函数第三个参数为配置参数，是可选项，可选项中带有以下参数</p> <div class="language-js extra-class"><pre class="language-js"><code>deep<span class="token operator">:</span> boolean<span class="token punctuation">;</span> <span class="token comment">// 是否深度监视, 及对象或数组内部(false)</span>
immediate<span class="token operator">:</span> boolean<span class="token punctuation">;</span> <span class="token comment">// 是否初始化执行, 及以当前值执行</span>
</code></pre></div><h3 id="composition-组合式-api"><a href="#composition-组合式-api" class="header-anchor">#</a> Composition 组合式 API</h3> <h4 id="reactive-声明响应式对象"><a href="#reactive-声明响应式对象" class="header-anchor">#</a> reactive 声明响应式对象</h4> <p>要为 JavaScript 对象创建响应式状态，可以使用 <code>reactive</code> 方法：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> reactive <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token comment">// 响应式状态</span>
<span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  count<span class="token operator">:</span> <span class="token number">0</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="ref-声明响应式值"><a href="#ref-声明响应式值" class="header-anchor">#</a> ref 声明响应式值</h4> <p>想象一下，我们有一个独立的原始值 (例如，一个字符串)，我们想让它变成响应式的。当然，我们可以创建一个拥有相同字符串 property 的对象，并将其传递给 <code>reactive</code>。Vue 为我们提供了一个可以做相同事情的方法 ——<code>ref</code>：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
</code></pre></div><p><code>ref</code> 会返回一个可变的响应式对象，该对象作为它的内部值——一个<strong>响应式的引用</strong>，这就是名称的来源。此对象只包含一个名为 <code>value</code> 的 property ：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>count<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token comment">// 0</span>

count<span class="token punctuation">.</span>value<span class="token operator">++</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>count<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token comment">// 1</span>
</code></pre></div><h4 id="响应式状态解构"><a href="#响应式状态解构" class="header-anchor">#</a> 响应式状态解构</h4> <p>当我们想使用大型响应式对象的一些 property 时，可能很想使用 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment" target="_blank" rel="noopener noreferrer">ES6 解构<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>来获取我们想要的 property：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> reactive <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token keyword">const</span> book <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  author<span class="token operator">:</span> <span class="token string">'Vue Team'</span><span class="token punctuation">,</span>
  year<span class="token operator">:</span> <span class="token string">'2020'</span><span class="token punctuation">,</span>
  title<span class="token operator">:</span> <span class="token string">'Vue 3 Guide'</span><span class="token punctuation">,</span>
  description<span class="token operator">:</span> <span class="token string">'You are reading this book right now ;)'</span><span class="token punctuation">,</span>
  price<span class="token operator">:</span> <span class="token string">'free'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">let</span> <span class="token punctuation">{</span> author<span class="token punctuation">,</span> title <span class="token punctuation">}</span> <span class="token operator">=</span> book
</code></pre></div><p>遗憾的是，使用解构的两个 property 的响应性都会丢失。对于这种情况，我们需要将我们的响应式对象转换为一组 ref。这些 ref 将保留与源对象的响应式关联：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> reactive<span class="token punctuation">,</span> toRefs <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token keyword">const</span> book <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  author<span class="token operator">:</span> <span class="token string">'Vue Team'</span><span class="token punctuation">,</span>
  year<span class="token operator">:</span> <span class="token string">'2020'</span><span class="token punctuation">,</span>
  title<span class="token operator">:</span> <span class="token string">'Vue 3 Guide'</span><span class="token punctuation">,</span>
  description<span class="token operator">:</span> <span class="token string">'You are reading this book right now ;)'</span><span class="token punctuation">,</span>
  price<span class="token operator">:</span> <span class="token string">'free'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">let</span> <span class="token punctuation">{</span> author<span class="token punctuation">,</span> title <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">toRefs</span><span class="token punctuation">(</span>book<span class="token punctuation">)</span>

title<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">'Vue 3 Detailed Guide'</span> <span class="token comment">// 我们需要使用 .value 作为标题，现在是 ref</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>book<span class="token punctuation">.</span>title<span class="token punctuation">)</span> <span class="token comment">// 'Vue 3 Detailed Guide'</span>
</code></pre></div><h3 id="provide-inject-声明注入"><a href="#provide-inject-声明注入" class="header-anchor">#</a> Provide / Inject 声明注入</h3> <h4 id="provide-提供源数据"><a href="#provide-提供源数据" class="header-anchor">#</a> Provide 提供源数据</h4> <p>为了增加 provide 值和 inject 值之间的响应性，我们可以在 provide 值时使用 <a href="https://v3.cn.vuejs.org/guide/reactivity-fundamentals.html#%E5%88%9B%E5%BB%BA%E7%8B%AC%E7%AB%8B%E7%9A%84%E5%93%8D%E5%BA%94%E5%BC%8F%E5%80%BC%E4%BD%9C%E4%B8%BA-refs" target="_blank" rel="noopener noreferrer">ref<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 或 <a href="https://v3.cn.vuejs.org/guide/reactivity-fundamentals.html#%E5%A3%B0%E6%98%8E%E5%93%8D%E5%BA%94%E5%BC%8F%E7%8A%B6%E6%80%81" target="_blank" rel="noopener noreferrer">reactive<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <p>使用 <code>MyMap</code> 组件，我们的代码可以更新如下：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- src/components/MyMap.vue --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>MyMarker</span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> provide<span class="token punctuation">,</span> reactive<span class="token punctuation">,</span> ref<span class="token punctuation">,</span> readonly <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> MyMarker <span class="token keyword">from</span> '<span class="token punctuation">.</span><span class="token operator">/</span>MyMarker<span class="token punctuation">.</span>vue

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  components<span class="token operator">:</span> <span class="token punctuation">{</span>
    MyMarker
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> location <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'North Pole'</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> geolocation <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      longitude<span class="token operator">:</span> <span class="token number">90</span><span class="token punctuation">,</span>
      latitude<span class="token operator">:</span> <span class="token number">135</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token comment">// 确保通过 provide 传递的数据不会被 inject 的组件更改, 使用 readonly</span>
    <span class="token function">provide</span><span class="token punctuation">(</span><span class="token string">'location'</span><span class="token punctuation">,</span> <span class="token function">readonly</span><span class="token punctuation">(</span>location<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token function">provide</span><span class="token punctuation">(</span><span class="token string">'geolocation'</span><span class="token punctuation">,</span> <span class="token function">readonly</span><span class="token punctuation">(</span>geolocation<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token comment">// 有时我们需要在注入数据的组件内部更新 inject 的数据。在这种情况下，建议 provide 一个方法来负责改变响应式 property。</span>
    <span class="token keyword">const</span> <span class="token function-variable function">updateLocation</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      location<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">'South Pole'</span>
    <span class="token punctuation">}</span>
    <span class="token function">provide</span><span class="token punctuation">(</span><span class="token string">'updateLocation'</span><span class="token punctuation">,</span> updateLocation<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="inject-源数据注入"><a href="#inject-源数据注入" class="header-anchor">#</a> Inject 源数据注入</h4> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- src/components/MyMarker.vue --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> inject <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> userLocation <span class="token operator">=</span> <span class="token function">inject</span><span class="token punctuation">(</span><span class="token string">'location'</span><span class="token punctuation">,</span> <span class="token string">'The Universe'</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> userGeolocation <span class="token operator">=</span> <span class="token function">inject</span><span class="token punctuation">(</span><span class="token string">'geolocation'</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> updateUserLocation <span class="token operator">=</span> <span class="token function">inject</span><span class="token punctuation">(</span><span class="token string">'updateLocation'</span><span class="token punctuation">)</span>

    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      userLocation<span class="token punctuation">,</span>
      userGeolocation<span class="token punctuation">,</span>
      updateUserLocation
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="mixin-混合合并"><a href="#mixin-混合合并" class="header-anchor">#</a> Mixin 混合合并</h3> <p>Mixin 提供了一种非常灵活的方式，来分发 Vue 组件中的可复用功能。一个 mixin 对象可以包含任意组件选项。当组件使用 mixin 对象时，所有 mixin 对象的选项将被“混合”进入该组件本身的选项。</p> <p>例子：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 定义 mixin 对象</span>
<span class="token keyword">const</span> myMixin <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hello from mixin!'</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 定义使用改 mixin 的应用</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> Vue<span class="token punctuation">.</span><span class="token function">createApp</span><span class="token punctuation">(</span><span class="token punctuation">{</span> mixins<span class="token operator">:</span> <span class="token punctuation">[</span>myMixin<span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">'#mixins-basic'</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; &quot;hello from mixin!&quot;</span>
</code></pre></div><h4 id="选项合并"><a href="#选项合并" class="header-anchor">#</a> 选项合并</h4> <p>当组件和 mixin 对象含有同名选项时，这些选项将以恰当的方式进行“合并”。</p> <p>比如，数据对象在内部会进行递归合并，并在发生冲突时以组件数据优先。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> myMixin <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">data</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
      message<span class="token operator">:</span> <span class="token string">'hello'</span><span class="token punctuation">,</span>
      bar<span class="token operator">:</span> <span class="token string">'abc'</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> app <span class="token operator">=</span> Vue<span class="token punctuation">.</span><span class="token function">createApp</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  mixins<span class="token operator">:</span> <span class="token punctuation">[</span>myMixin<span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token function-variable function">data</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
      message<span class="token operator">:</span> <span class="token string">'goodbye'</span><span class="token punctuation">,</span>
      bar<span class="token operator">:</span> <span class="token string">'def'</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$data<span class="token punctuation">)</span> <span class="token punctuation">}</span> <span class="token comment">// =&gt; { message: &quot;goodbye&quot;, foo: &quot;abc&quot;, bar: &quot;def&quot; }</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>同名钩子函数将合并为一个数组，因此都将被调用。另外，mixin 对象的钩子将在组件自身钩子<strong>之前</strong>调用。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> myMixin <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'mixin 对象的钩子被调用'</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> app <span class="token operator">=</span> Vue<span class="token punctuation">.</span><span class="token function">createApp</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  mixins<span class="token operator">:</span> <span class="token punctuation">[</span>myMixin<span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'组件钩子被调用'</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// =&gt; &quot;mixin 对象的钩子被调用&quot;</span>
<span class="token comment">// =&gt; &quot;组件钩子被调用&quot;</span>
</code></pre></div><h2 id="vue-实例对象生命周期"><a href="#vue-实例对象生命周期" class="header-anchor">#</a> Vue 实例对象生命周期</h2> <h3 id="生命周期流程"><a href="#生命周期流程" class="header-anchor">#</a> 生命周期流程</h3> <img src="https://cn.vuejs.org/images/lifecycle.png" alt="Vue 实例生命周期" style="zoom:50%;"> <h3 id="对比-vue2-x-的声明周期"><a href="#对比-vue2-x-的声明周期" class="header-anchor">#</a> 对比 Vue2.x 的声明周期</h3> <ul><li><code>beforeCreate</code> -&gt; 使用<code>setup()</code></li> <li><code>created</code> -&gt; 使用 <code>setup()</code></li> <li><code>beforeMount</code> -&gt; <code>onBeforeMount</code></li> <li><code>mounted</code> -&gt; <code>onMounted</code></li> <li><code>beforeUpdate</code> -&gt; <code>onBeforeUpdate</code></li> <li><code>updated</code> -&gt; <code>onUpdated</code></li> <li><code>beforeDestroy</code> -&gt; <code>onBeforeUnmount</code></li> <li><code>destroyed</code> -&gt; <code>onUnmounted</code></li> <li><code>errorCaptured</code> -&gt; <code>onErrorCaptured</code></li></ul> <h3 id="vue生命周期函数"><a href="#vue生命周期函数" class="header-anchor">#</a> Vue生命周期函数</h3> <p><strong>一、初始化显示可调用函数</strong></p> <ul><li><code>setup()</code></li> <li><code>onBeforeMount()</code></li> <li><code>onMounted()</code></li></ul> <p><strong>二、更新状态可调用函数</strong></p> <ul><li><code>onBeforeUpdate()</code></li> <li><code>onUpdated()</code></li></ul> <p><strong>三、销毁Vue实例可调用函数</strong></p> <ul><li><code>onBeforeUnmount()</code></li> <li><code>onUnmounted()</code></li></ul> <p><strong>一般比较常用的生命周期方法</strong></p> <ul><li><code>setup()/onMounted()</code>: 发送ajax请求, 启动定时器等异步任务</li> <li><code>onBeforeUnmount()</code>: 做收尾工作, 如: 清除定时器</li></ul> <h2 id="vue-自定义命令"><a href="#vue-自定义命令" class="header-anchor">#</a> Vue 自定义命令</h2> <h3 id="vue所有实例注册"><a href="#vue所有实例注册" class="header-anchor">#</a> Vue所有实例注册</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">&quot;./App.vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span>

<span class="token comment">// 元素内所有字符串改变为大写</span>
app<span class="token punctuation">.</span><span class="token function">directive</span><span class="token punctuation">(</span><span class="token string">&quot;upper-text&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> binding</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> value<span class="token operator">:</span> string <span class="token operator">=</span> binding<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
  el<span class="token punctuation">.</span>innerText <span class="token operator">=</span> value<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="vue单个实例注册"><a href="#vue单个实例注册" class="header-anchor">#</a> Vue单个实例注册</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  directives<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;upper-text&quot;</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> binding<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> value<span class="token operator">:</span> string <span class="token operator">=</span> binding<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
      el<span class="token punctuation">.</span>innerText <span class="token operator">=</span> value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="使用自定义标签属性"><a href="#使用自定义标签属性" class="header-anchor">#</a> 使用自定义标签属性</h3> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>test<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">v-upper-text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>msg<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>adsaSAsSasAS<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="vue命令生命周期执行"><a href="#vue命令生命周期执行" class="header-anchor">#</a> Vue命令生命周期执行</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> app <span class="token operator">=</span> Vue<span class="token punctuation">.</span><span class="token function">createApp</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">directive</span><span class="token punctuation">(</span><span class="token string">'highlight'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function">beforeMount</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> binding<span class="token punctuation">,</span> vnode<span class="token punctuation">,</span> prevVnode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">beforeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">updated</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">beforeUnmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 新</span>
  <span class="token function">unmounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="vue-源码分析"><a href="#vue-源码分析" class="header-anchor">#</a> Vue 源码分析</h2> <p>####### ###</p> <h2 id="vue-面向组件编程"><a href="#vue-面向组件编程" class="header-anchor">#</a> Vue 面向组件编程</h2> <h3 id="脚手架搭建环境"><a href="#脚手架搭建环境" class="header-anchor">#</a> 脚手架搭建环境</h3> <div class="language-makefile extra-class"><pre class="language-makefile"><code>cnpm i <span class="token operator">@</span>vue/cli -g

vue create  <span class="token string">'项目名'</span>  / vue ui

<span class="token comment">#↓↓↓↓↓↓↓#</span>

<span class="token symbol">? Please pick a preset</span><span class="token punctuation">:</span> <span class="token punctuation">(</span>Use arrow keys<span class="token punctuation">)</span> <span class="token comment">## 选择你的配置, 如果之前保存有配置, 会在此显示</span>
  Default <span class="token punctuation">(</span>[Vue 2] babel, eslint<span class="token punctuation">)</span>
  Default <span class="token punctuation">(</span>Vue 3 Preview<span class="token punctuation">)</span> <span class="token punctuation">(</span>[Vue 3] babel, eslint<span class="token punctuation">)</span>
&gt; Manually select features
  
<span class="token comment">#↓↓↓↓↓↓↓#</span>

<span class="token symbol">? Check the features needed for your project</span><span class="token punctuation">:</span> <span class="token comment">## 选择配置项, &lt;空格&gt;表示选择, &lt;a&gt;表示全选, &lt;i&gt;表示反转</span>
&gt;<span class="token punctuation">(</span>*<span class="token punctuation">)</span> Choose Vue version
 <span class="token punctuation">(</span>*<span class="token punctuation">)</span> Babel <span class="token comment">## ES6转为ES5的解析器</span>
 <span class="token punctuation">(</span>*<span class="token punctuation">)</span> TypeScript <span class="token comment">## .ts的解析器</span>
 <span class="token punctuation">(</span> <span class="token punctuation">)</span> Progressive Web App <span class="token punctuation">(</span>PWA<span class="token punctuation">)</span> Support <span class="token comment">## 渐进式Web应用程序</span>
 <span class="token punctuation">(</span>*<span class="token punctuation">)</span> Router  <span class="token comment">## vue路由</span>
 <span class="token punctuation">(</span>*<span class="token punctuation">)</span> Vuex    <span class="token comment">## vue状态数据管理</span>
 <span class="token punctuation">(</span>*<span class="token punctuation">)</span> CSS Pre-processors <span class="token comment">## css预编译器</span>
 <span class="token punctuation">(</span>*<span class="token punctuation">)</span> Linter / Formatter <span class="token comment">## 代码风格检查和格式化</span>
 <span class="token punctuation">(</span> <span class="token punctuation">)</span> Unit Testing  <span class="token comment">## 单元测试(unit tests)</span>
 <span class="token punctuation">(</span> <span class="token punctuation">)</span> E2E Testing   <span class="token comment">## e2e测试(end to end)</span>
 
<span class="token comment">#↓↓↓↓↓↓↓## </span>

? Choose a version of Vue.js that you want to start the project with <span class="token comment">## 选择您要用来启动项目的Vue.js版本</span>
  2.x
&gt; 3.x <span class="token punctuation">(</span>Preview<span class="token punctuation">)</span>

<span class="token comment">#↓↓↓↓↓↓↓#</span>

Use class-style component syntax? <span class="token punctuation">(</span>y/N<span class="token punctuation">)</span> <span class="token comment">## 是否选用class类模式</span>

? Use Babel alongside TypeScript <span class="token punctuation">(</span>required for modern mode, auto-detected polyfills, transpiling JSX<span class="token punctuation">)</span>? <span class="token punctuation">(</span>Y/n<span class="token punctuation">)</span> <span class="token comment">## 将Babel与TypeScript一起使用（现代模式，自动检测的polyfill，转化JSX所需）？ （是/否）</span>

<span class="token comment">#↓↓↓↓↓↓↓#</span>

<span class="token symbol">? Check the features needed for your project</span><span class="token punctuation">:</span> Babel, Router, Vuex, CSS Pre-processors, Linter, Unit
? Use history mode for router? <span class="token punctuation">(</span>Y/n<span class="token punctuation">)</span> 	<span class="token comment">## router是否使用history模式, 否则使用hash默认(建议n)</span>

<span class="token comment">#↓↓↓↓↓↓↓#</span>

<span class="token symbol">? Pick a CSS pre-processor</span><span class="token punctuation">:</span> <span class="token comment">## 选择css 预处理器</span>
&gt; Sass/SCSS <span class="token punctuation">(</span>with dart-sass<span class="token punctuation">)</span>
  Sass/SCSS <span class="token punctuation">(</span>with node-sass<span class="token punctuation">)</span>
  Less
  Stylus

<span class="token comment">#↓↓↓↓↓↓↓#</span>

<span class="token symbol">? Pick a linter / formatter config</span><span class="token punctuation">:</span> <span class="token comment">## 选择Eslint 代码验证规则 (通常Prettier用的比较多)</span>
  ESLint with error prevention only
  ESLint + Airbnb config
  ESLint + Standard config
&gt; ESLint + Prettier

<span class="token comment">#↓↓↓↓↓↓↓#</span>

<span class="token symbol">? Pick additional lint features</span><span class="token punctuation">:</span> <span class="token comment">## 选择什么时候检测</span>
&gt;<span class="token punctuation">(</span>*<span class="token punctuation">)</span> Lint on save		<span class="token comment">## 保存就检测</span>
 <span class="token punctuation">(</span> <span class="token punctuation">)</span> Lint and fix on commit		<span class="token comment">## fix或commit的时候检测</span>

<span class="token comment">#↓↓↓↓↓↓↓#</span>

<span class="token symbol">? Pick a unit testing solution</span><span class="token punctuation">:</span> <span class="token comment">## 选择单元测试方案</span>
&gt; Mocha + Chai		<span class="token comment">## Mocha测试库+Chai断言库</span>
  Jest		<span class="token comment">## Jest测试库</span>

<span class="token comment">#↓↓↓↓↓↓↓#</span>

? Where do you prefer placing config for Babel, ESLint, etc.? <span class="token comment">## 项目配置文件存放处</span>
  In dedicated config files		<span class="token comment">## 独立文件存放</span>
&gt; In package.json		<span class="token comment">## 统统放在package.json中</span>

<span class="token comment">#↓↓↓↓↓↓↓#</span>

? Save this as a preset for future projects? <span class="token punctuation">(</span>y/N<span class="token punctuation">)</span> <span class="token comment">## 是否保存该配置到本地文件, 如果选择Y, 选择需要输入名称</span>

<span class="token comment">#↓↓↓↓↓↓↓#</span>

Vue CLI v4.3.1		<span class="token comment">## 安装相应包, 等待创建项目中</span>
<span class="token symbol">✨  Creating project in D</span><span class="token punctuation">:</span>/......
⚙️  Installing CLI plugins. This might take a while...

<span class="token comment">#↓↓↓↓↓↓↓#</span>

npm run serve --open	<span class="token comment">## 内存中打包并开启服务</span>

<span class="token comment">## 配置run serve自动打开浏览器</span>
<span class="token symbol">package.json --&gt; scripts</span><span class="token punctuation">:</span><span class="token punctuation">{</span>serve<span class="token punctuation">:</span> <span class="token string">&quot;vue-cli-service serve --open&quot;</span><span class="token punctuation">}</span>
</code></pre></div><h4 id="项目目录文件解析"><a href="#项目目录文件解析" class="header-anchor">#</a> 项目目录文件解析</h4> <div class="language-markdown extra-class"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">##</span> 项目总文件</span>
  <span class="token list punctuation">-</span> node_modules		用node安装的依赖包
  <span class="token list punctuation">-</span> src				资源文件夹以后我们就在这个目录写代码
  <span class="token list punctuation">-</span> public			静态资源html(图片之类)json数据之类
  <span class="token list punctuation">-</span> tests				单元测试,代码测试
  <span class="token list punctuation">-</span> .gitignore		上传需要忽略的文件格式
  <span class="token list punctuation">-</span> babel.config.js		babel相关log信息
  <span class="token list punctuation">-</span> package.json		项目基本信息(项目开发所需模块,项目名称,版本, es配置)
  <span class="token list punctuation">-</span> README.md			项目说明(如何使用,有哪些方法等等)
<span class="token title important"><span class="token punctuation">##</span> src目录文件 &gt; 项目资源</span>
  <span class="token list punctuation">-</span> assets		    静态资源(js,css之类可以放在这下面)
  <span class="token list punctuation">-</span> components	    公用组件编写的地方
  <span class="token list punctuation">-</span> router/index.js		路由配置文件
  <span class="token list punctuation">-</span> store/index.js		vuex状态数据管理配置文件
  <span class="token list punctuation">-</span> views			路由组件存放地(视图组件)
  <span class="token list punctuation">-</span> App.vue		    项目的主组件,所有页面都是在app.vue下切换的.一个标准的vue文件,分为三部分。
  <span class="token list punctuation">-</span> main.js	    	页面程序入口文件,加载各种公共组件
</code></pre></div><h4 id="生产环境的操作"><a href="#生产环境的操作" class="header-anchor">#</a> 生产环境的操作</h4> <div class="language-markdown extra-class"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">##</span> 编译打包</span>
npm run build
<span class="token title important"><span class="token punctuation">##</span> 模拟后台 (静态服务器工具包)</span>
安装：npm install serve -g
运行dist包文件夹：serve dist
访问: http://localhost:5000

<span class="token title important"><span class="token punctuation">##</span> 修改打包项目名称</span>
webpack.prod.conf.js --&gt; output:{publicPath: '打包名称'}

<span class="token title important"><span class="token punctuation">##</span> 动态web服务器如何开启打包项目</span>
将打包文件拷贝到运行的tomcat（后端服务） 的运行目录下
访问: http://localost:8080/xxx
</code></pre></div><h3 id="组件基本架构-define"><a href="#组件基本架构-define" class="header-anchor">#</a> 组件基本架构(define)</h3> <p>新版不使用new Vue进行创建应用，而使用createApp进行创建应用，且组件使用defineComponent函数进行创建。Vue在推送新语法的同时，向后兼容对象写法。</p> <h4 id="入口函数-src-main-ts"><a href="#入口函数-src-main-ts" class="header-anchor">#</a> 入口函数 src / main.ts</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/* src/main.js */</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span> <span class="token comment">// 引入创建应用方法</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">&quot;./App.vue&quot;</span><span class="token punctuation">;</span> <span class="token comment">// 引入入口Vue文件</span>
<span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">&quot;#app&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 创建Vue且挂载至#app元素中</span>
</code></pre></div><h4 id="主组件格式-src-app-vue"><a href="#主组件格式-src-app-vue" class="header-anchor">#</a> 主组件格式 src / app.vue</h4> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 模板页面(支持多跟节点) --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>count: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>{{ count }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent<span class="token punctuation">,</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      count
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scss<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><h4 id="引入组件格式"><a href="#引入组件格式" class="header-anchor">#</a> 引入组件格式</h4> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 使用组件标签(大小写区分) --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>HelloWorld</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>HelloWorld</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 使用组件标签(中划线区分) --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hello-world</span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> HelloWorld <span class="token keyword">from</span> <span class="token string">&quot;./components/HelloWorld.vue&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  components<span class="token operator">:</span> <span class="token punctuation">{</span>
    HelloWorld
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scss<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="组件基本架构-setup"><a href="#组件基本架构-setup" class="header-anchor">#</a> 组件基本架构(setup)</h3> <p>单文件组件 Composition API 语法糖，用于改善在单个文件组件中使用Composition API时的创作体验。</p> <h4 id="主组件格式-src-app-vue-2"><a href="#主组件格式-src-app-vue-2" class="header-anchor">#</a> 主组件格式 src / app.vue</h4> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>count: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>inc<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ count }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token function-variable function">inc</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> count<span class="token punctuation">.</span>value<span class="token operator">++</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scss<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="引入组件格式-2"><a href="#引入组件格式-2" class="header-anchor">#</a> 引入组件格式</h4> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 使用组件标签(大小写区分) --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>HelloWorld</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>HelloWorld</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 使用组件标签(中划线区分) --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hello-world</span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> HelloWorld <span class="token keyword">from</span> <span class="token string">&quot;./components/HelloWorld.vue&quot;</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scss<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="父子组件间通信"><a href="#父子组件间通信" class="header-anchor">#</a> 父子组件间通信</h2> <h3 id="子接收父数据-define"><a href="#子接收父数据-define" class="header-anchor">#</a> 子接收父数据(define)</h3> <p><strong>利用标签名从父组件传输数据到子组件</strong></p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 父组件标签(App.vue)传输数据(任意JS属性或方法) --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TdoHead</span>  <span class="token attr-name">:addTask</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>addTask<span class="token punctuation">'</span></span> <span class="token punctuation">/&gt;</span></span> 
</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 子组件(TdoHead.vue)props接收数据 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">&quot;HelloWorld&quot;</span><span class="token punctuation">,</span>
  props<span class="token operator">:</span> <span class="token punctuation">{</span>
    addTask<span class="token operator">:</span> Array <span class="token keyword">as</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Array<span class="token operator">&lt;</span>any<span class="token operator">&gt;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>addTask<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>利用自定义事件传输父组件方法到子组件(暂未找到方法)</strong></p> <h3 id="子接收父数据-setup"><a href="#子接收父数据-setup" class="header-anchor">#</a> 子接收父数据(setup)</h3> <p><strong>利用标签名从父组件传输数据到子组件</strong></p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 父组件标签(App.vue)传输数据(任意JS属性或方法) --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TdoHead</span>  <span class="token attr-name">:addTask</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>addTask<span class="token punctuation">'</span></span> <span class="token punctuation">/&gt;</span></span> 
</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token function">子组件</span><span class="token punctuation">(</span>TdoHead<span class="token punctuation">.</span>vue<span class="token punctuation">)</span>props接收数据 <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> props <span class="token operator">=</span> <span class="token function">defineProps</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  addTask<span class="token operator">:</span> Array
<span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>addTask<span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>利用自定义事件传输父组件方法到子组件(暂未找到方法)</strong></p> <h3 id="子接受父标签"><a href="#子接受父标签" class="header-anchor">#</a> 子接受父标签</h3> <p><strong>一、父组件利用子组件标签，传入实体标签</strong></p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 传入子组件需要的标签 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span> 
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>xxx<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>xxx 对应的标签结构<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>yyy<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>yyy 对应的标签结构<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span> 
</code></pre></div><p><strong>二、子组件使用父组件传入的标签输出标签</strong></p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 输出父组件标签 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>xxx<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>父组件对应xxx的标签结构<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>组件确定的标签结构<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>yyy<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>父组件对应yyy的标签结构<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="父接受子参数"><a href="#父接受子参数" class="header-anchor">#</a> 父接受子参数</h3> <p><strong>一、子组件利用 slot 插槽传递任意属性 / 事件</strong></p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 输出父组件标签, 传入参数 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>xxx<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:toggle</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>addCount<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:count</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>count<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span>
<span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token function-variable function">toggle</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    count<span class="token punctuation">.</span>value<span class="token operator">++</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>二、父组件从插槽中获取属性 / 事件</strong></p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 传入子组件需要的标签, 接收参数 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span> 
    <span class="token comment">&lt;!-- slot-scope接收参数(废弃) --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>xxx<span class="token punctuation">&quot;</span></span> <span class="token attr-name">slot-scope</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ count, toggle }<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>toggle<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> {{ count }} <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- v-slot接收参数 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span class="token namespace">v-slot:</span>xxx</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ count, toggle }<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>toggle<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> {{ count }} <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span> 
</code></pre></div><h2 id="子组件间通信"><a href="#子组件间通信" class="header-anchor">#</a> 子组件间通信</h2> <h3 id="props通信"><a href="#props通信" class="header-anchor">#</a> props通信</h3> <ol><li>父组件定义状态数据
父组件定义改变状态数据方法</li> <li>父组件传递状态数据给子组件B
父组件传递改变状态数据方法给子组件A</li> <li>子组件A调用方法改变父组件状态数据
子组件B自动调用<code>componentWillReceiveProps()</code>方法并接收状态数据</li></ol> <h3 id="消息订阅系统"><a href="#消息订阅系统" class="header-anchor">#</a> 消息订阅系统</h3> <ol><li>引入消息订阅系统
<code>import PubSub from 'pubsub-js'</code></li> <li>发布消息
<code>PubSub.publish('消息名',data)</code></li> <li>订阅消息(当消息发送改变时执行，并接收数据)
<code>PubSub.subscribe('消息名',(msg, data){...})</code></li></ol> <h2 id="瞬移与异步组件"><a href="#瞬移与异步组件" class="header-anchor">#</a> 瞬移与异步组件</h2> <h3 id="teleport-瞬移组件"><a href="#teleport-瞬移组件" class="header-anchor">#</a> Teleport 瞬移组件</h3> <p>Vue 鼓励我们通过将 UI 和相关行为封装到组件中来构建 UI。我们可以将它们嵌套在另一个内部，以构建一个组成应用程序 UI 的树。</p> <p>然而，有时组件模板的一部分逻辑上属于该组件，而从技术角度来看，最好将模板的这一部分移动到 DOM 中 Vue app 之外的其他位置。</p> <p>一个常见的场景是创建一个包含全屏模式的组件。在大多数情况下，你希望模态框的逻辑存在于组件中，但是模态框的快速定位就很难通过 CSS 来解决，或者需要更改组件组合。</p> <p>考虑下面的 HTML 结构。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token style-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token style language-css"><span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>Tooltips with Vue 3 Teleport<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modal-button</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modal-button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>让我们来看看 <code>modal-button</code> 组件：</p> <p>该组件将有一个 <code>button</code> 元素来触发模态框的打开，以及一个带有 class <code>.modal</code> 的 <code>div</code> 元素，它将包含模态框的内容和一个用于自关闭的按钮。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> app <span class="token operator">=</span> Vue<span class="token punctuation">.</span><span class="token function">createApp</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'modal-button'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  template<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    &lt;button @click=&quot;modalOpen = true&quot;&gt;
        Open full screen modal!
    &lt;/button&gt;

    &lt;div v-if=&quot;modalOpen&quot; class=&quot;modal&quot;&gt;
      &lt;div&gt;
        I'm a modal! 
        &lt;button @click=&quot;modalOpen = false&quot;&gt;
          Close
        &lt;/button&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> 
      modalOpen<span class="token operator">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>当在初始的 HTML 结构中使用这个组件时，我们可以看到一个问题——模态框是在深度嵌套的 <code>div</code> 中渲染的，而模态框的 <code>position:absolute</code> 以父级相对定位的 <code>div</code> 作为引用。</p> <p>Teleport 提供了一种干净的方法，允许我们控制在 DOM 中哪个父节点下渲染了 HTML，而不必求助于全局状态或将其拆分为两个组件。</p> <p>让我们修改 <code>modal-button</code> 以使用 <code>&lt;teleport&gt;</code>，并告诉 Vue “<strong>Teleport</strong> 这个 HTML <strong>到</strong>该‘<strong>body</strong>’标签”。</p> <div class="language-js extra-class"><pre class="language-js"><code>app<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'modal-button'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  template<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    &lt;button @click=&quot;modalOpen = true&quot;&gt;
        Open full screen modal! (With teleport!)
    &lt;/button&gt;

    &lt;teleport to=&quot;body&quot;&gt;
      &lt;div v-if=&quot;modalOpen&quot; class=&quot;modal&quot;&gt;
        &lt;div&gt;
          I'm a teleported modal! 
          (My parent is &quot;body&quot;)
          &lt;button @click=&quot;modalOpen = false&quot;&gt;
            Close
          &lt;/button&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/teleport&gt;
  </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> 
      modalOpen<span class="token operator">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>因此，一旦我们单击按钮打开模态框，Vue 将正确地将模态框内容渲染为 <code>body</code> 标签的子级。</p> <h3 id="suspense-异步组件"><a href="#suspense-异步组件" class="header-anchor">#</a> Suspense 异步组件</h3> <p>Suspense 组件用于在等待某个异步组件解析时显示后备内容。</p> <p>以下是异步组件有用的一些实例：</p> <ul><li>在页面加载之前显示加载动画</li> <li>显示占位符内容</li> <li>处理延迟加载的图像</li></ul> <p>以前，在Vue2中，我们必须使用条件(例如 v-if 或 v-else)来检查我们的数据是否已加载并显示后备内容。</p> <p>但是现在，Suspense随Vue3内置了，因此我们不必担心跟踪何时加载数据并呈现相应的内容。</p> <h4 id="实现异步组件处理"><a href="#实现异步组件处理" class="header-anchor">#</a> 实现异步组件处理</h4> <p>在这个例子中，我们有一个异步的 ArticleInfo.vue 组件。</p> <p>setup 方法可以像其他方法一样被设置为异步，对于我们的示例，组件将具有异步 setup 方法，该方法将在返回之前加载用户数据。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getArticleInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
  <span class="token comment">// 一些异步API调用</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span> article <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token keyword">async</span> <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> <span class="token punctuation">{</span> article <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getArticleInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
    <span class="token keyword">return</span> <span class="token punctuation">{</span> 
      article    
    <span class="token punctuation">}</span>  
<span class="token punctuation">}</span><span class="token punctuation">}</span> 
</code></pre></div><p>然后，假设我们有一个 ArticlePost.vue 组件，其中包含我们的ArticleInfo组件。</p> <p>如果我们要在等待组件获取数据并解析时显示“正在拼了命的加载…”之类的内容，则只需三个步骤即可实现Suspense。</p> <ul><li>将异步组件包装在<code>&lt;template #default&gt;</code>标记中</li> <li>在我们的Async组件的旁边添加一个兄弟姐妹，标签为<code>&lt;template #fallback&gt;</code>。</li> <li>将两个组件都包装在<code>&lt;suspense&gt;</code>组件中</li></ul> <p>使用插槽，Suspense将渲染后备内容，直到默认内容准备就绪。然后，它将自动切换以显示我们的异步组件。</p> <p>所以，看起来会像这样。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Suspense</span><span class="token punctuation">&gt;</span></span> 
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#default</span><span class="token punctuation">&gt;</span></span> 
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>article-info</span><span class="token punctuation">/&gt;</span></span> 
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span> 
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#fallback</span><span class="token punctuation">&gt;</span></span> 
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>正在拼了命的加载…<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span> 
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Suspense</span><span class="token punctuation">&gt;</span></span> 
</code></pre></div><h4 id="捕获异步组件错误"><a href="#捕获异步组件错误" class="header-anchor">#</a> 捕获异步组件错误</h4> <p>当我们开始使用异步组件时，可以捕获错误并向用户显示一些错误消息。</p> <p>即使在Vue2中，也可以使用 errorCaptured 钩子函数实现，但是在Vue3中，它已重命名为 onErrorCaptured。</p> <p>无论调用什么，此钩子函数都会在捕获到任何后代组件的错误时运行。如果出现问题，我们可以将其与Suspense一起使用以渲染错误。</p> <p>如果我们处理了一个错误以显示错误消息，则上面的组件将是这样。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span> 
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>errMsg<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> {{ errMsg }} <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span> 
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Suspense</span> <span class="token attr-name">v-else</span><span class="token punctuation">&gt;</span></span> 
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#default</span><span class="token punctuation">&gt;</span></span> 
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>article-info</span> <span class="token punctuation">/&gt;</span></span> 
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span> 
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#fallback</span><span class="token punctuation">&gt;</span></span> 
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>正在拼了命的加载…<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span> 
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span> 
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Suspense</span><span class="token punctuation">&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript"> 
<span class="token keyword">import</span> <span class="token punctuation">{</span> onErrorCaptured <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span> 
<span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
  <span class="token keyword">const</span> errMsg <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span> 
  <span class="token function">onErrorCaptured</span><span class="token punctuation">(</span><span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> 
    errMsg<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">'呃，出了点问题！'</span> 
    <span class="token keyword">return</span> <span class="token boolean">true</span> 
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span> 
  <span class="token keyword">return</span> <span class="token punctuation">{</span> error <span class="token punctuation">}</span> 
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span> 
</code></pre></div><h2 id="路由组件编程"><a href="#路由组件编程" class="header-anchor">#</a> 路由组件编程</h2> <p>Vue Router 4.0 提供了 Vue 3 支持，并有许多突破性的变化。</p> <h3 id="vue-路由管理器"><a href="#vue-路由管理器" class="header-anchor">#</a> Vue 路由管理器</h3> <h4 id="定义路由组件"><a href="#定义路由组件" class="header-anchor">#</a> 定义路由组件</h4> <p>路由组件装载着需要的内容，通常这类组件放在 <em>src/views</em> 文件夹内<code>(about.vue、home.vue)</code></p> <h4 id="定义路由控制器"><a href="#定义路由控制器" class="header-anchor">#</a> 定义路由控制器</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createRouter<span class="token punctuation">,</span> createWebHashHistory<span class="token punctuation">,</span> RouteRecordRaw <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue-router&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> About <span class="token keyword">from</span> <span class="token string">'../views/about.vue'</span>

<span class="token keyword">const</span> routes<span class="token operator">:</span> Array<span class="token operator">&lt;</span>RouteRecordRaw<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span> <span class="token comment">// 配置路由地址</span>
    path<span class="token operator">:</span> <span class="token string">&quot;/about&quot;</span><span class="token punctuation">,</span>
    component<span class="token operator">:</span> About<span class="token punctuation">,</span>
    children<span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token comment">// 其他子路由</span>
      <span class="token comment">// { path:'note', component: aboutl }</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    meta<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// $route元数据 router.meta</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token comment">// 配置异步路由组件</span>
    path<span class="token operator">:</span> <span class="token string">&quot;/home&quot;</span><span class="token punctuation">,</span> <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
      <span class="token comment">// 中间可添加打包后名称</span>
      <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName: &quot;home&quot; */</span> <span class="token string">&quot;../views/home.vue&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// 路由路径模式, </span>
  <span class="token comment">// createWebHashHistory对应hash模式,</span>
  <span class="token comment">// createWebHistory对应history模式</span>
  history<span class="token operator">:</span> <span class="token function">createWebHashHistory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  routes
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> router<span class="token punctuation">;</span>
</code></pre></div><h4 id="vue-入口函数引入路由"><a href="#vue-入口函数引入路由" class="header-anchor">#</a> Vue 入口函数引入路由</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">&quot;./App.vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> router <span class="token keyword">from</span> <span class="token string">&quot;./router&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>router<span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">&quot;#app&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="静态组件使用路由组件"><a href="#静态组件使用路由组件" class="header-anchor">#</a> 静态组件使用路由组件</h4> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/about<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Go to about<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/home<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Go to home<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAaYAAADkCAIAAABc9BeHAAAAAXNSR0IArs4c6QAAJLdJREFUeF7tnW1MXNeZxw/7ARQpblY2NOA29WxSj2MLpCRYEUOVhVbKgLTGuOBIHhzJ8MWkkvGmIdqAk4qgxMZdQZralhr7i7FqM5ZqvLFhVZhINbSKx4qCExWvqUmTjpsWiCFRUyJZ8IU9555zZ+4M83Jm7p2Xc+d/Yyn4cl6e83tm/j6vzylYW1sjeEAABEAgPwj8S340E60EARAAAUYAkofPAQiAQB4RgOTlkbPRVBAAAUgePgMgAAJ5RACSl0fORlNBAAQgefgMgAAI5BEBSF4eORtNBQEQgOThMwACIJBHBCB5eeRsNBUEQACSh88ACIBAHhGA5OWRs9FUEAABSB4+AyAAAnlEoCB+WIGCgoI8goGmggAIqExAJkhKYsmTKUVlSrAdBEDADgRo/0xGrDCwtYOz0QYQAAFJApA8SVBIBgIgYAcCkDw7eBFtAAEQkCQAyZMEhWQgAAJ2IADJs4MX0QYQAAFJApA8SVBIBgIgYAcCkDw7eBFtAAEQkCQAyZMEhWQgAAJ2IADJs4MX0QYQAAFJApA8SVBIBgIgYAcCkDw7eBFtAAEQkCQAyZMEhWQgAAJ2IADJs4MX0QYQAAFJApA8SVBIBgIgYAcCkDw7eBFtAAEQkCQAyZMEhWQgAAJ2IADJs4MX0QYQAAFJApA8SVBIBgIgYAcCkDw7eBFtAAEQkCQAyZMEhWQgAAJ2IADJs4MX0QYQAAFJApA8SVBIBgIgYAcCkDw7eBFtAAEQkCQAyZMEhWQgAAJ2IADJs4MX0QYQAAFJAmmSvOmBnfzpGFmSs2RppENkGZiWyyGTKlap6alNxiI9zZ3BBtHenQ2Dd5LJmfm0IVo7d1rpncy3BDWCQJokD2ATEJgePTOvJ5k/Mzy1AmIgAAKZIADJywTlyDpWpkaGV0MvVy8PTSxnww7UCQJ5RwCSlwWXL08MXdYUz7VrV5lW/+TohOQEQBbMRZUgYCMCkLzMO3P5um9Sq9VZ2+pp5prnH56cy7wlqBEE8o4AJC/jLp/zebnilbnLHdtcQvNuDfpyfBEj46BQIQikgQAkLw1Q4xYZ8A/f4orX7NpGyLbaVqf2VyxiZNoTqC8vCSgmeUvTIyePtLfUVfMNHtV1Le1HTo5Mp2UeLD113ZkYnDUoHiEOV3O59iLRIsa6jT9LU0NH2ptrdRKdx4avB2KsgpjJm5ffCzTatgTUkbyl6wMt1fVtved8U7NfiuXO1S9np3znetvqq1sGrluoe2mra2VqWGxO4X089mx2NXDNI5Nen+yE3tzE68317W/5pu5+w/Xyy9nJy32H99ZJgEg6b7HDoX8BnI4Ntv0uoGF5QUARyZsb6dh92Dtr2NgR7p3VWe/h3R0jsoIRz7UrgeG01bVya3yUt8HZWisUj2qe21PDLZKc0Fv2D3S8PHo3WisYiL2d47FBmMlLK9xU+GBefC/QSNsSUEHyVqYG2nv9XCoerDx04tLYtfc/5M/7Y5dOvOR2FmodHX9vx8C0yT29K1OnOvpEXaIyURer6lCl+MKnVldwcwopb3YFO06EbKh2C82bH/YnXsTwv9XrpXpXWH6AouDWvT92oWcXx0DIN5O9feMx+rxm8tr2S4CG5ROBdEuev7deP1cV///1vf4Y3O94X/dqJxUKXT1XJ063VjuKNxSJtEXFjuqWY0OXjrq1vR53vQOjATPuu+M9xuuignLowrhWmaiLVdV6evysZwuv4C41K7E8GY1ZmhjlS7XE1Vyz2fibDbXNTfzvsosYW5pOXB3sCFpXVLyt4fWhSz0urnqr/lPnYot/8nnLnC5hbtkmDGzNfMCQN+sE0i15phsYnP0qbOrvbwgTilDZm+u6D/F+0q3BieR0KMxAegxMDBdd3cdat+nCakhTVNF5skd8/++eGU3mOPDc5LBQ9ZpdtcXhYIoq65qEWsmcxNhy6NiR6ogiaIGbG/r7RTHzwyO3ond4zeQlpCj4r41pz6IAEMgGgZyXvNkJMfvVXFcdRYJ0ZhuqG9y8m+S7FUgV5J2pCTFb2ORxx1BXbepNdMlWJ6bk9fWOb5BvTiHuhup1XaWi8rpdYlyaeBGj5mBzcCIwQjqrmw/yvc2ro9f5ynDEk1peYVqqYJEPBHKGQLolz9UzJqbdEvxvTO87haOZC+hrFt72uCPjH77s4zln78ylOJ+3PD8rjvq7Kp1x5LXIWSn6efNTAdl14jv+YVF40y5XlMFhUaUuVgkXMSprK2KPLh36GHR1NpptqeUt3uzgcCudm3LmowtDQCAVAumWvFRsMuahu1CSLWL+yxSP6K8s6xkdm9ePGg1mBBWAdqbkrAttTiHk8uEfRBXv/af02CoJJvScjpg9UDry3LSZd/PIVCAYqyVkpJm8tJRC+h8eEFCZQK5LnspsQ7avTI3zOAKSz+rlYX+Kuk02bRI9stVkauSGxc5bCKmT9B2S5TgBZSSvsueq3Aj5w5MNcbtoWXDI8sTw5SSr9Y1cT1Hz5gOiX5zCruGYecsclVoDEnR/k2wkkoNA5gnkuuRtcPATqGRqOpDiFJ001KIN+hRZYC7uFN3SXEAUukFmATMYR4A4uy/F1+1r/XwRJu5JjLjW0dG56N1tejDKrmEzeZlZ2ezs6afmpCNtS3seCfOIQK5LXlmZOIxFRidi7LqwzFsbypxiGsw/NRtHX1dmp8RuE5oh8Ta1Of+IWKoN34Acze4NrmaxyyTOIsbU1N3Y1s36R3nBZZWOKL3dFPOG/jWwjDYKAoGsEMh1ySuqqBb9ntXLg3FOoK5MD4i7JEzcJLGtslb0Yi7HOe1KO21imFpYWxljs4jBl6HNKeUNrjjrDjyLYbNKzEWM1dGYM33LE14Rbjl0hjfsc5Vi3g21x7TuaWdFVj6lqBQELCOQ65JHDP0edqBsKuoMFw0DIE5okPJWd2IZioWvYtdBcbYi1uE1Kq0d+jmRsoO7EitAaHNK5JGL6EYYNqvEDK2y6jtyJNp54rmRI0d8fFgbE4OZvJZ96lAQCGSNQM5LHimqPKifo6KHvNob2gdGpueWxchuZXluemSgdffhy/zUxJYDnbsS9qTiwN7mOeIRg9u73ra69sHrgSW9qqXA9cH2ujZ2vJU9hU3dnoTiaticsv7IRQw7glFD40zo0TO+e1teH57WtyCuzE0Pv96yVz+JHBeDmbxZ+5yiYhCwiEDuSx4hxXX9pw8Ez8xPeXvbdv9QbG37wQ93t/V6b/GeDT2De7KjIs4eYglmRZWHTnaLk6rkm6lTh/fW61XV7z18aoqHamIncM92xjsNwpMt+4f1zSk17vVHLmJpnrtVn8C8NewPrEvldLloX3R1drSvbbdu3O62vlGxaTsuhpTy4lJHiU8OkihCQAXJozNcFR1nh0KhQqKwLXTuOnrpZKwzuMk4o8jRfPLS0WBYkvVZHyz30CP9UU/gRiRevj4ijoREPWQW06rNNc36Mf7ZKGeGN7m7B0P/BoSVUuiktsXDYCZvMhTTn3b5zvhAJw+QSiPFdtK+f5xV9uXA9eFjnXpoWZY+RjxVfVWYX9drqKO2uXNwylDDSiC8+vE7MTcV0VizA50tIpbrztrm9iNDMWO5pp9b3teghuRRNxU5aKiQa1fP9hxwVzq36NsvCjc5K90Hes5evTb0ep2ZEW34B2FzXaiuTWJF48Etzpqm7hOXrk0MdkY50h/lkxTanEKiHzKL+ekrrt0loklFD61SuKGyY2j8wlFPjSDBjPNoGBLaZiZvrnxdVufGOxv2v+qd5AFSWXxU2vevb44aO4zFe63be7jv8qQeWlYunmp4Hd/cnTzVvrtlSDtUTYOstuwNr/7V/Q2d6yN2rdwZaq+lcW29k7Miliv55u6U7y25WK65gttedhSsra3FaVFBQYIE9qKR062hHZA2L7OQnltOdru1mbw5A0VvBB2cr/j9USOkFjadvnak0jC3QZebWoLTr9FassVzdqgzNBui19F04MDUuXNR6ijvvtS93Ln/VLTqI2pPtu6cAa2oIZJipUwvT1E3wGzrCcxSvSss9xy9oMdHvXr6QLkeemt8yrBnkQWXFctNPLasHlA1FO2VrogNGLMIcy9TvXuw5qWzV0WOqyea+Fr+LSqhp+7SCYSjojQanVWf/F29PCF2YLKULM4jF0Zj3cZorqzu6+neYG89f8VLhOQp7sC8NN/Vc2mws26biN5atLmy42SPmAm4++WXQSTBKNSF7qOXDOFeebTXSyeatMX56HuB6CLQ0EBLxWbeYyzaXN15hG8SX11d3eI5fbazTgSPpdFZm/v7d/FKQ4dblifO8Z5gWdMJY90kLJrrKt0AKhuLJy89nYZGQ/LSABVFppdAlGiGGypr+YoPvQtKr3xleopHoa7p6a5bfxKluLpDxJWdnFy33bOw+WDEWljRlgp+zpi4Wg9E7AsoclSK34Xqvs5XrmoOdUSb+d3ccIgHNvT7jIsi6eWG0hkBSB4+B6oRcFVEiWZouIVNb8/8PB9mxowRGNTJ6UDk/UiV5WJ7ZhQ4jvUn+dYF1dLrdtVWxjiSSI/6aGX7b0WJ8aWaS1SyF5KnkrdgazIElgM8LrRzc6y1fF0n5/VbQoPFmw0Zo9cd5+4XvhZFyJepxndMhgXSBglA8vBhAIGsEljWjxJl1Yr8qRySp4yvKzpF4Klkd6jQFprJqwygSEP1wGOzc7Gu9aXXDPB+oOUXkhdu4gNjd/+1RGEeU3Cnsi7JBcMhebngBdiQDgJ64LGpienoJyOWpyd4OFXHJquv9Njs4BEnJq7HC0OWjlajzAQEIHn4iNiVQFFFJd+5MtkbLfDM0vWTp/iKrstVnjjsYXKUNlTWaHWvXj52Kmr0H7pPuVm7AqV1OFYfNLkakVqSACRPEhSSqUdgQ22L2Evn720xRMVZ0YLi7D18md8IT/e8WH91QLBuLfqPISIPYdF/hl9v43ukC92tsa8PVY+4ChZD8lTwEmxMjUBRZedpDz81YYyK8wNDUJwtTf0diUPipFB9jLp37mTRf0TYm0JX96FaqzuYKdiaV1kgeXnl7rxrbFFF5+kTHj3yWETzWdyZ00ekg3olCy9u3fQYWk33UL8VsX+StSvP00Py8vwDYP/mF1d3Do1fOvESjcAjouLQ+Ds0KM5pmbgzJvGwuln4H09NMPqPHvxnbGKg2WEuuKNJ4/I0OyKp5Knj0WwQsBkBRFKxmUPRHBAAAQsIYGBrAUQUAQIgoAoBSJ4qnoKdIAACFhCA5FkAEUWAAAioQgCSp4qnYCcIgIAFBCB5FkBEESAAAqoQgOSp4inYCQIgYAEBSJ4FEFEECICAKgQgeap4CnaCAAhYQACSZwFEFAECIKAKAUieKp6CnSAAAhYQgORZABFFgAAIqEIAkqeKp2AnCICABQQsjqRCgxlYYJRNi1hbW7Npy9AsEMg+AclIKtZLHr7YUZ0v6Y/sf3BgAQioSUDyK4aBrZruhdUgAAIpEYDkpYQNmUAABNQkAMlT02+wGgRAICUCkLyUsCETCICAmgQgeWr6DVaDAAikRACSlxI2ZAIBEFCTACRPTb/BahAAgZQIQPJSwoZMmSbw2cCrvxuZ9O98dUz7458OGUB/xV+O7Tz/GXt9myYLJmC/HbgtUi9N/q5j8iv6l+nzepawovRCL+4hx2+Q4wWEbq2nf24QQt/wn+n74BN8WbCHLBjy8pQJXy5cFGVGJL5xXLzfc5HZEKwx+J6bhCclApC8lLAhUxYIrPbefGDsaP2HR5/uKf66jasboYo2S/bTl9r7xVmmaDse9pD7gUXt97e/8BISWGQyR8hX/pvEvWMjFb62xVKtqPox9/22X3y8tL453S5Su0bogRlvI3EVkEAX+3neS7qPC3WjendxH3tJ//irSNlxVgZVJU+V1Euqd2Ue4teyr82TxivkhYusBPre1S3edwVIt24ZLdlFRMnUDJdBZLPgC4WrhOQp7Lx8M91T90Qxa/NG11OFZPGfVKeWJgPe7c7OHZzExobnS4nvzjR51L191XebydzS4n3X9ofIzb8yUVv8q4/mLQnDVlzzow9/yosNfxq9pEp7U7uPkEbSqv2ltJZpU4BpG/EQ8g79lfZUdZG+bnIx2NPTX651RRZLU/KXpZpc8ipIKdnXKFJOXCR9fvG+qpXWrD0L5DjVQb00mpcK+SB6euvdlvgNJC8xI6TIWQLzn6+SmVl9tDu28+0Fv2Zr2SOF/s//Ibp1dQ87lu7PU/mjIvjU96i6Fdc4PEsL9Wws/LsR3hlM8FRRUQp7FgKEXCFl+siXjjR5d4yJVHdoOMzzRH0pirshEnuuiBeBK8Th0Osq1TUxQGtjnU0xZC4gwfSJTMfvIwhA8vCRUJzAdqc2qg3+cVVQUdux0TXzxTT5x+zSA44S2un72nebzH/ORrVaax/tFAPk1d63I2YG5Wk0knk+LNX/7KO6WEre1f7axxWKDz+jvuRi5yLeeTF8TlizGAXr1XWJLmLCfEhgJJA1yfvo9M++3xz888vhe8n45daF73f9Xuqf53ilzrzZ/LM3byVTb7S0i+O//P7pGbOlIH9KBGhvjo9wI5+S77mL7wcmv/Buf5gqIE0WWPzYtxgxqt3Y8FMqlE4PYYKY3FNKO2J8hBvj6dJn6CYMo13jyxsThI6dqTgyoTQ8jkYSCJa7oC9TONgINxA+cE7OYqQWBLIieUxrniMtfx5+Q/zpLX7lJxaoD7yabwT4ELVXW4SlD12X2CnWIjY6SlZ7fV+7HvlX+r645AG/byGgjWrDk/H1jYfcYjZQnl+VtqyhLVmwR+uy0bk1tqiqv1yYIFcaSW1p9Jc00xVd2tiihz6wpVOHdOWET9PdGGTjWfaUkq4+4nlBXxdeIHsKIqcO5W3P75RZkLyPTg8Nulv+3L49RL58v/9g8eD7wb7S4nCX3gFc34GiXbyeP5FP3nM1X/iIF0HfiA5jrN6iocDmn7WNGzqI7+t5w7qNTJR5mcHErDcXSiN6iPSl68wS8Q1Z0evM709iiq1/tPNFumTxAZ/Oq7+5cUxfi6h46iFCCsVIlq3hEkcJH9XSubwnegifyxvbeeF+z4tsLJz0s+9dtmQhJtdcbI2VDjT5OgZ/yRZk32WTgAlfHncQfx+5cpEpGl2aoD/zaTv6ng6Q+dQeLYQuWYjZwzKybz6ye5h0A/I1Aw1vF+ehVOIniPitRPrbbzS9femLOKXeu/TKa4+9c1tLYfzZkGX6/GOvTN7jL+jPwQKNP4eShxVyb+xtPT215LXHms7f1FLefOc1vUz2vnWMFx/6mWUMVqq9f2NaM5G+F9ZaSTIp7EhsWwJ9ZM07b9vWWdowCfFh9WW8l3dv8VNS/Oi3Y/8Lc8v3yieP/0b0AUuaX3r2GZ8v9kzf4vD5Pz1zsKWZF1i+/zfupVf+J2JmraT5+BvBTmXJk08+Y6i8tXf/k9pfn/zxs8988tHv75HFcd/g1mf/u47vZdj+Wu/jfzjjE93JfP13Ee3OHAG63Y/uQOYP3aPXrQ2N8VhHIOOSF2F6aExKR5FsoLr49yWy9ZHvBpN9u+SxeK1dmvmEPPad0Far7zqibLHiBYgFk5+894dQgcXbg+LLKlqauUf+Flgi/1YSKvHbjxgl0jryKAkEohHY9w6hW/7E0PgimdeGxnisI5BxydOU5bPg+mz5fn0F43HrGhVZEhe75/7yrJ8umPzqWUhY+lCjZNME9B0tbO8L9M40znUFZFzyyPb/iDL2DNlV8p1i8snnfwu+YAPhOE/x9q3k07+HliNYHy3ymflfX/HPf/XGn4//e/jGe5qOdevEo424aaeP9RP/shgq8d7nhl6h9Q5AiSAAApkkkHnJI0+2t7TSJU7jUuy937fRRVj+lLt/vvVPz4nfLg6/9d4f3G4xVRcFTEnz83SubUhM9t268BxVtx8b1oJFlqC0zbwZNrAlg+f5/r5QRSV17tZP3vsvsao782YPnSt00/k+TYvZZB9LTef7Mukl1AUCIGARgazdcEYHm8/5Qo1o7X3jtfLgX+mekhOvfKL9NWI7i0hC94gMDRLad/tPpoZ82wp79DcRdMISuGd+MvTpwcNn65bebPZtP1j8yhkt79Zn/aFuIC+fPc+wlKJ3GLSZLpjsujY087xmM9VrJqOP/2ZYrIREdY3k9UsWuRXFgEDeEZD8imVN8vLNIZL+yDcsaC8IWEVA8iuWacmjywhWtTDXyvnt2x1bH4m5+0bSH7nWKNgDAqoQkPyKZVryVMFnuZ2S/rC8XhQIAnlCQPIrBsnL0OdB0h8ZsgbV2JIADQd94WvRsuLS4Nk7GgK6Td+e73I/fbJGHLwTKWmu8QeCidUFI/kVy8KKrbpMYTkI5DCBzwYufO0JBogmerSF2/62mYfO8uBa7Dzyx2EhAo0qmcNts9A09PIshBmvKMl/gjJkDaqRJUADzQec+zf6LmjBR1nX6VvnXp2lB/xpzIKeF3/UIBbzWTx67SU9o+j88PlHtZ/kX7K7OIIdMUMJX4384oNebaepx10a8H3lFjWG3msmaVGdwztrNKhM/ecOagkt+cwjwZ4dyzhbV6/FkebmFXq2E+9iKByDLJjcSyf5FUMvL/dcB4tyi8Bq7zjpYb0kpxZLOeB8kfWYzm6n72Pfv0GouMwG3E+HXcoR/aWmd/pdHB/uf4jGeeb3E02f/6CX8Ds6nnbeFAGfaahnKlu+p3jJ9WdLFuq1a0BoyHsjNhovi7AgqV+JO0DE72hMLeK9yc0mTmbejw48klu4020NJC/dhFF+bhGYmJhoaWlpaGigP0hapt+5QaMr006cg/fsWHCqePdvGMtmsUgjZ9DoTR36y4rn60P3b2hxrrTnM99MYc/z4rqPhjoaC0t7bt+hOtijz8dVPO/0zATEWLXkW6ET5iUP0NuB+BOMmkV/ZkFVxfNoQ8SkniQOxZNB8hR3IMxPkkB/f//s7Oz8/PyZM2eSzMqS85ijxifG/RsbqUj5eSC/0A1qUV+Kwlh8UxbCTx8gL/4zQGgUe70qXcJYb05c3MHvpdTTp9CYvMwCyctLt6PRWiBIyzBEu3+D7HDxFQMXVyh+C2W0l1zs6n0PaIsMNDB9oofO34Vd96FPKRpj4i/e5zcf0Ue/05L9zAQ6vx9IXn77P/9a//LLL2/durW0tLS9vd2S1se8f4OXXvLESSpPbIaOzqwFu2zGl/R23VVtpTU8OHPJtxzB23hpPl3C2CSddmFbxMPeR756oIywybuIZ31H1RIOqhQCyVPFU7DTGgK1tbVer3d0dJT+YEmJMe7foIsMY+wece2Zvvk1YRcPRX3JEgQvF6eLHmLlV7uNt/c8v1b8q5FxfcPdjm2Gm8u1hdpX/UxM6STg0sI5cW8RS+/S7vqgc45+drev9ix+fGZGD45vSeMVLASbVDLkNMkV9AxZg2pkCbCdHGQ/39XBllZDGz6Mm0IWP+7Qr9AN7RpJ6aVn/9PO8Q96S/hOl4hNKvcPip6gYfsLoXvuRPeQbUzx6ePW0FZkw44WOhe5bisyy2W4M0QWTO6lk/yKWS95uYciVyyycvIoV9oEOzJFgAloUPIyValS9UhKnsUDW0uv77BbYUp9fmBs1gnQrtwY36DHOpjjC37tTl48JglY3MszaQ2ygwAIhAgYT4OFDnWAUHQCkr08iyWP1gqHxCKAgS0+GyCQPgJZkzx8saM6VdIf6ftAoGQQsDcBya+YxXN59maK1oEACKhOAJKnugdhPwiAQBIEIHlJwEJSEAAB1QlA8lT3IOwHARBIggAkLwlYSAoCIKA6Aes3qWDFFiu2qn8rVLU/2bsvQulDp9ZUbTshkiu2kLwMuVjSHxmyBtXYkIDxOLCInMzikjJdI+IcLju1pkeTZ+/v81j29jhmK/kVg+Rl6LMv6Y8MWYNqZAnY9u4LFn2e6Nd0GKVQlkzOpZP8imEuL+c8B4NyjIA9775g0efFtURk6fZX/uKNrnWR9XLMEdaYA8mzhiNKUYUA7r4I8xQLt0cDMhP9kg1V3Ji6nZC81Nkhp4oEcPdFmNd4YPqjjtm3Q1FbVHSrvM2QPHlWSGkrAlZuLVD+7gt2eVvwskdbuXldY7IneccL6Kqy/mcPWUiG843jZM/FJDLQuo7fSCI9ktqXAO6+0O6+CAtJb19vR2lZViTvBlM64qd3TIk//ipSVkAgSnn10ctSY3H3hXvHRkJv0aV3Tt78q3axBn20O3PraOh5+z/Z2KRC+1xU77qqwuhe3EMCXfrLBbKnjFzRft+3LiXt4rm6+e/IWhf7f+hNI5l/l5SucxursY9081y08jUiKo9W0cJFUhagBopaqAGtAVLGb9rTa6Q/UoM93MQYlYZbIbmCbv9PnGIttPPdF4a7Mgr5Bj2lH9mvWPxo6xRBUuHYJdJTvWlcm49T6vxaI1nr82spjD8bsvj71hq94u/052CBxp+NNVClCqbxNq6RvnWFGyqa99L7TYUB/Gdjeq9mOi0kzABeYLxHgkyiIvD7fCZw76NDR67/MZ8JJGq75FcsgaJJlhI0JnF6JiJxBYLJliEBS79OIkOSp0kVlyH+UHUTcmkgZHwZLDBWRWE1hpdPlY4Vvk61aflGG6L5JjGZRB7F7/OMwKf9R37b/3+i0X/89W8rf/1pnhFIrrmSX7GszOUZus90TBpaxDjOfhG4QRodoRSlhp+jdLsDbPzrMAxlHY2ynXP5iozl09IXAoTWSicfg5brI2bZqpEOBBITeLRz/0PeC2N03xz9EzopkTgjUsQjkHHJYxJ2I7Q+W9Wlr2D0KeUoOn+nr73wRZh962cQlWoQjM1BAmLTHN03FzopkYNmqmVSxiWPLhz0XSGDsVdnHVXkCu1G6Q/rUsV5HHTxgAQMO1wCfElB4kmuIkOBTLWvkPh2SdSPJCAAApknkHnJI6TLT7pdYRvl6CKpWIQlpKqVNHbrv10gL3hIX1eURViBqpR09RHPC6LbSIfJ3Y2kNXwtOBbU5CoyllJFvI3EpQ3D2aPtucEOm8x/eFEjCCRPIBuSRzt6dCRIXKG5MLoFhC4J8B0nVN7enSc3+G/LSNW6TSo0SVUtueIhBdoGZjo05tv6aHrXjeibVKJzkagoFtB975K+bt1+l2HXS/IeQA4QAIEMEsjGvrwMNi93qpLdNJQ7FsMSEFCKgORXLCu9PKVAwlgQAAEbEYDk2ciZaAoIgEAiAhjYJiJk0e8le90W1YZi8pJAEndfsEjxvfoJWwGLxoPRg4aqiE/yKwbJy5BzJf2RIWtQjQ0JJHn3hZGA4R4MdcFIfsUgeRlysaQ/MmQNqpElYNu7LwwAmFYG3E+zu4FUfiS/YpjLU9nJsD0TBOx590WQ3NJkwFtc2qO43sl/ECB58qyQ0g4EcPdFuBc/O+db9dQ9UWwH30q1AZInhQmJbEMAd1+EufL2F17ykHuHbdybuCGQvMSMkMKWBGhkIsvapezdF9M3vybbH66wDIQCBUHyFHASTLSQAO6+0O6+4A+N/048T+VF/PfgRwiSZ+G3CUUpQAB3X2h3X2jP4j8DpNCpePz3ZD9z2KSSLLEU00uuoKdYOrKli4Cd774gbDseOXvUZY+BreRXzHrJS9dnT/1yrZw8Up8GWpAcgcWPO96+f9Au8pRc2+VSS0qexQPb5ILV51lqOcchFQiIibaBV8cGbgsa0+ML/jxbZ0jT58DiXl6arESxIJCPBIxnZhU/AJsB90n28iB5GfAFqgABEEg7AUnJs3hgm/ZmoQIQAAEQMEEAkmcCHrKCAAioRgCSp5rHYC8IgIAJApA8E/CQFQRAQDUCkDzVPAZ7QQAETBCA5JmAh6wgAAKqEYDkqeYx2AsCIGCCACTPBDxkBQEQUI0AJE81j8FeEAABEwQgeSbgISsIgIBqBCB5qnkM9oIACJggAMkzAQ9ZQQAEVCMAyVPNY7AXBEDABAFIngl4yAoCIKAaAUieah6DvSAAAiYIQPJMwENWEAAB1QhA8lTzGOwFARAwQQCSZwIesoIACKhGAJKnmsdgLwiAgAkCkDwT8JAVBEBANQKQPNU8BntBAARMEIDkmYCHrCAAAqoRgOSp5jHYCwIgYIIAJM8EPGQFARBQjQAkTzWPwV4QAAETBCB5JuAhKwiAgGoEIHmqeQz2ggAImCAAyTMBD1lBAARUIwDJU81jsBcEQMAEAUieCXjICgIgoBoBSJ5qHoO9IAACJghA8kzAQ1YQAAHVCEDyVPMY7AUBEDBBAJJnAh6yggAIqEYAkqeax2AvCICACQKQPBPwkBUEQEA1ApA81TwGe0EABEwQKFhbW4uTvaCgwEThyAoCIAACmSMQX824HQkkL3PGoiYQAAEQSD8BDGzTzxg1gAAI5AwBSF7OuAKGgAAIpJ8AJC/9jFEDCIBAzhCA5OWMK2AICIBA+glA8tLPGDWAAAjkDAFIXs64AoaAAAiknwAkL/2MUQMIgEDOEIDk5YwrYAgIgED6CUDy0s8YNYAACOQMAUhezrgChoAACKSfACQv/YxRAwiAQM4QgOTljCtgCAiAQPoJQPLSzxg1gAAI5AwBSF7OuAKGgAAIpJ/A/wMEAHm/v+fogwAAAABJRU5ErkJggg==" alt="1574341010"></p> <h4 id="路由组件缓存"><a href="#路由组件缓存" class="header-anchor">#</a> 路由组件缓存</h4> <p>可让显示路由保存值和自身，在刷新页面时或重新启动浏览器不会消失</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>keep-alive</span> <span class="token attr-name">include</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>test-keep-alive<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> <span class="token comment">&lt;!-- 利用keep-alive标签包裹显示路由 --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>w<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>keep-alive</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="组件中操作路由"><a href="#组件中操作路由" class="header-anchor">#</a> 组件中操作路由</h3> <h4 id="组件中访问路由"><a href="#组件中访问路由" class="header-anchor">#</a> 组件中访问路由</h4> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> useRoute<span class="token punctuation">,</span> useRouter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue-router&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// 当前显示路由</span>
<span class="token keyword">const</span> $route <span class="token operator">=</span> <span class="token function">useRoute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 路由管理器</span>
<span class="token keyword">const</span> $router <span class="token operator">=</span> <span class="token function">useRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="组件中操纵跳转"><a href="#组件中操纵跳转" class="header-anchor">#</a> 组件中操纵跳转</h4> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> useRoute<span class="token punctuation">,</span> useRouter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue-router&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> $router <span class="token operator">=</span> <span class="token function">useRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 页面跳转(推入)</span>
$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&quot;/home&quot;</span><span class="token punctuation">)</span>
<span class="token comment">// 页面跳转(替换)</span>
$router<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;/about&quot;</span><span class="token punctuation">)</span>
<span class="token comment">// 页面回退(前提是前进页面)</span>
$router<span class="token punctuation">.</span><span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 页面前进(前提是返回页面)</span>
$router<span class="token punctuation">.</span><span class="token function">go</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="路由跳转时传入参数"><a href="#路由跳转时传入参数" class="header-anchor">#</a> 路由跳转时传入参数</h3> <h4 id="路径中传入占位符参数-params"><a href="#路径中传入占位符参数-params" class="header-anchor">#</a> 路径中传入占位符参数(params)</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 定义路由时, 定义占位符为id</span>
roates<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">'/home/:id'</span><span class="token punctuation">,</span> commponent<span class="token operator">:</span> Home <span class="token punctuation">}</span><span class="token punctuation">]</span>
</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 定义标签内跳转, 传入id为6 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/home/6<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>User<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/* 定义命令跳转, 传入id为6 */</span>
$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&quot;/home/6&quot;</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="对象中传入对象参数-params"><a href="#对象中传入对象参数-params" class="header-anchor">#</a> 对象中传入对象参数(params)</h4> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 定义标签内跳转, 传入id为6 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{path: <span class="token punctuation">'</span>/home<span class="token punctuation">'</span>, params: {id: 60}}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>User<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/* 定义命令跳转, 传入id为6 */</span>
$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>path<span class="token operator">:</span> <span class="token string">&quot;/home&quot;</span><span class="token punctuation">,</span> params<span class="token operator">:</span> <span class="token punctuation">{</span>id<span class="token operator">:</span> <span class="token number">60</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="对象中传入查询参数-query"><a href="#对象中传入查询参数-query" class="header-anchor">#</a> 对象中传入查询参数(query)</h4> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 定义标签内跳转, 传入id为6 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{path: <span class="token punctuation">'</span>/home<span class="token punctuation">'</span>, query: {id: 60}}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>User<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/* 定义命令跳转, 传入id为6 */</span>
$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>path<span class="token operator">:</span> <span class="token string">&quot;/home&quot;</span><span class="token punctuation">,</span> query<span class="token operator">:</span> <span class="token punctuation">{</span>id<span class="token operator">:</span> <span class="token number">60</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="监听路由参数变化"><a href="#监听路由参数变化" class="header-anchor">#</a> 监听路由参数变化</h3> <h4 id="使用watch进行监听"><a href="#使用watch进行监听" class="header-anchor">#</a> 使用watch进行监听</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> watch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useRoute <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue-router&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> route <span class="token operator">=</span> <span class="token function">useRoute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 全局监听</span>
<span class="token function">watch</span><span class="token punctuation">(</span>route<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 单独监听</span>
<span class="token function">watch</span><span class="token punctuation">(</span>route<span class="token punctuation">.</span>params<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="使用watcheffect进行监听"><a href="#使用watcheffect进行监听" class="header-anchor">#</a> 使用watchEffect进行监听</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> watchEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useRoute <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue-router&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> route <span class="token operator">=</span> <span class="token function">useRoute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 全局监听</span>
<span class="token function">watchEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;当前路由&quot;</span><span class="token punctuation">,</span> route<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 单独监听</span>
<span class="token function">watchEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;当前路由参数&quot;</span><span class="token punctuation">,</span> route<span class="token punctuation">.</span>params<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="使用-beforerouteupdate-导航守卫"><a href="#使用-beforerouteupdate-导航守卫" class="header-anchor">#</a> 使用 beforeRouteUpdate 导航守卫</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> onBeforeRouteUpdate <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue-router&quot;</span><span class="token punctuation">;</span>
<span class="token function">onBeforeRouteUpdate</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 对路线变化做出反应...</span>
  <span class="token comment">// 不要忘记调用 next()</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="导航守卫-路由拦截器"><a href="#导航守卫-路由拦截器" class="header-anchor">#</a> 导航守卫(路由拦截器)</h3> <h4 id="全局前置守卫"><a href="#全局前置守卫" class="header-anchor">#</a> 全局前置守卫</h4> <p>使用 <code>router.beforeEach</code> 注册一个全局前置守卫：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  history<span class="token operator">:</span> <span class="token function">createWebHashHistory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  routes
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>当一个导航触发时，全局前置守卫按照创建顺序调用。守卫是异步解析执行，此时导航在所有守卫 resolve 完之前一直处于 <strong>等待中</strong>。具体参数参考：</p> <h4 id="全局后置钩子"><a href="#全局后置钩子" class="header-anchor">#</a> 全局后置钩子</h4> <p>可以注册全局后置钩子，然而和守卫不同的是，这些钩子不会接受 <code>next</code> 函数也不会改变导航本身：</p> <div class="language-js extra-class"><pre class="language-js"><code>router<span class="token punctuation">.</span><span class="token function">afterEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="路由独享守卫"><a href="#路由独享守卫" class="header-anchor">#</a> 路由独享守卫</h4> <p>在路由配置上直接定义 <code>beforeEnter</code> 守卫：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> routes<span class="token operator">:</span> Array<span class="token operator">&lt;</span>RouteRecordRaw<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">'/foo'</span><span class="token punctuation">,</span>
    component<span class="token operator">:</span> Foo<span class="token punctuation">,</span>
    <span class="token function-variable function">beforeEnter</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// ...</span>
  <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><h4 id="组件内的守卫"><a href="#组件内的守卫" class="header-anchor">#</a> 组件内的守卫</h4> <p>可以在路由组件内直接定义以下路由导航守卫：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> onBeforeRouteUpdate<span class="token punctuation">,</span> onBeforeRouteLeave <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue-router&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// 对路线变化做出反应, 不要忘记调用 next()</span>
<span class="token function">onBeforeRouteUpdate</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 导航离开该组件的对应路由时调用</span>
<span class="token function">onBeforeRouteLeave</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="当前路由路队列信息-matched"><a href="#当前路由路队列信息-matched" class="header-anchor">#</a> 当前路由路队列信息（matched）</h3> <ul><li><p><strong>类型</strong>：<a href="https://next.router.vuejs.org/zh/api/#routerecordnormalized" target="_blank" rel="noopener noreferrer"><code>RouteRecordNormalized[\]</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><strong>详细内容</strong>：</p> <p>与给定路由地址匹配的<a href="https://next.router.vuejs.org/zh/api/#routerecord" target="_blank" rel="noopener noreferrer">标准化的路由记录<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>数组。</p></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// currentRoutePath</span>
<span class="token string">'/user/control/a'</span>
<span class="token comment">// route.matched</span>
<span class="token punctuation">[</span><span class="token punctuation">{</span>path<span class="token operator">:</span><span class="token string">'/user'</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>path<span class="token operator">:</span> <span class="token string">'/user/control'</span><span class="token punctuation">,</span><span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token operator">...</span><span class="token operator">...</span><span class="token punctuation">]</span>
</code></pre></div><h4 id=""><a href="#" class="header-anchor">#</a></h4> <h3 id="动态路由添加-addroute"><a href="#动态路由添加-addroute" class="header-anchor">#</a> 动态路由添加（addRoute）</h3> <p>addRoutes 被 addRoute 替代，添加一条新的<a href="https://next.router.vuejs.org/zh/api/#routerecordraw" target="_blank" rel="noopener noreferrer">路由记录<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>作为现有路由的子路由。如果路由有一个 <code>name</code>，并且已经有一个与之名字相同的路由，它会先删除之前的路由。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// currentRoutes</span>
<span class="token punctuation">[</span>
    <span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">'/login'</span> component<span class="token operator">:</span> <span class="token comment">/*....*/</span> <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
<span class="token comment">// addRoute</span>
routes<span class="token punctuation">.</span><span class="token function">addRoute</span><span class="token punctuation">(</span><span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">'/user'</span><span class="token punctuation">,</span> component<span class="token operator">:</span> <span class="token comment">/*....*/</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// currentRoutes</span>
<span class="token punctuation">[</span>
    <span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">'/login'</span> component<span class="token operator">:</span> <span class="token comment">/*....*/</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">'/user'</span><span class="token punctuation">,</span> component<span class="token operator">:</span> <span class="token comment">/*....*/</span> <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><h4 id="addroutes-兼容方法"><a href="#addroutes-兼容方法" class="header-anchor">#</a> addRoutes 兼容方法</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> addRoutes <span class="token operator">=</span> routes<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">route</span> <span class="token operator">=&gt;</span> router<span class="token punctuation">.</span><span class="token function">addRoute</span><span class="token punctuation">(</span>route<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="退出登录后刷新路由方法"><a href="#退出登录后刷新路由方法" class="header-anchor">#</a> 退出登录后刷新路由方法</h4> <div class="language-js extra-class"><pre class="language-js"><code>location<span class="token punctuation">.</span><span class="token function">reload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="将-props-传递给路由组件"><a href="#将-props-传递给路由组件" class="header-anchor">#</a> 将 props 传递给路由组件</h3> <p>在你的组件中使用 <code>$route</code> 会与路由紧密耦合，这限制了组件的灵活性，因为它只能用于特定的 URL。虽然这不一定是件坏事，但我们可以通过 <code>props</code> 配置来解除这种行为：</p> <p>我们可以将下面的代码</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> User <span class="token operator">=</span> <span class="token punctuation">{</span>
  template<span class="token operator">:</span> <span class="token string">'&lt;div&gt;User {{ $route.params.id }}&lt;/div&gt;'</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">'/user/:id'</span><span class="token punctuation">,</span> component<span class="token operator">:</span> User <span class="token punctuation">}</span><span class="token punctuation">]</span>
</code></pre></div><p>替换成</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> User <span class="token operator">=</span> <span class="token punctuation">{</span>
  props<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'id'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  template<span class="token operator">:</span> <span class="token string">'&lt;div&gt;User {{ id }}&lt;/div&gt;'</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">'/user/:id'</span><span class="token punctuation">,</span> component<span class="token operator">:</span> User<span class="token punctuation">,</span> props<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">]</span>
</code></pre></div><p>这允许你在任何地方使用该组件，使得该组件更容易重用和测试。</p> <h4 id="-2"><a href="#-2" class="header-anchor">#</a></h4> <h2 id="vuex-集中式状态管理"><a href="#vuex-集中式状态管理" class="header-anchor">#</a> Vuex 集中式状态管理</h2> <p>Vuex 4.0 提供了 Vue 3 支持，其 API 与 3.x 基本相同。唯一的突破性变化是<a href="https://github.com/vuejs/vuex/tree/4.0#breaking-changes" target="_blank" rel="noopener noreferrer">插件的安装方式<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <h3 id="简单store状态管理"><a href="#简单store状态管理" class="header-anchor">#</a> 简单store状态管理</h3> <h4 id="_1-定义核心管理模块"><a href="#_1-定义核心管理模块" class="header-anchor">#</a> 1. 定义核心管理模块</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 新版创建方式由createStore创建</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vuex&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// 暴露VuexStore</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">createStore</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  state<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 状态对象</span>
  mutations<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 包含多个更新state函数的对象</span>
  actions<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 包含多个对应事件回调函数的对象</span>
  getters<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 包含多个getter计算属性函数的对象</span>
  modules<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>  <span class="token comment">// 包含多个store模块的对象</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="_2-入口文件中引入"><a href="#_2-入口文件中引入" class="header-anchor">#</a> 2. 入口文件中引入</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">&quot;./App.vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">&quot;./store&quot;</span><span class="token punctuation">;</span>

<span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>store<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">&quot;#app&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="模块化状态管理"><a href="#模块化状态管理" class="header-anchor">#</a> 模块化状态管理</h3> <h4 id="_1-定义文件目录结构-src-store"><a href="#_1-定义文件目录结构-src-store" class="header-anchor">#</a> 1. 定义文件目录结构(src / store)</h4> <ul><li><code>userInfo.ts</code>		  / <em>状态对象</em> /</li> <li><code>order.ts</code>       /  <em>多个更新state函数的引用对象</em> /</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 定义 `modules` 中使用的对象模板</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Module <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vuex&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> createStore <span class="token operator">=</span> <span class="token operator">&lt;</span><span class="token constant">S</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token parameter">store<span class="token operator">:</span> Module<span class="token operator">&lt;</span><span class="token constant">S</span><span class="token punctuation">,</span> any<span class="token operator">&gt;</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> store
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">createStore</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  state<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 状态对象</span>
  mutations<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 包含多个更新state函数的对象</span>
  actions<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 包含多个对应事件回调函数的对象</span>
  getters<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 包含多个getter计算属性函数的对象</span>
  modules<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>  <span class="token comment">// 包含多个store模块的对象</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="_2-定义vuex接口-src-store-index-ts"><a href="#_2-定义vuex接口-src-store-index-ts" class="header-anchor">#</a> 2. 定义Vuex接口 (src / store / index.ts)</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vuex&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> userInfo <span class="token keyword">from</span> <span class="token string">&quot;./userInfo&quot;</span>
<span class="token keyword">import</span> order <span class="token keyword">from</span> <span class="token string">&quot;./order&quot;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">createStore</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  modules<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 包含多个store模块的对象</span>
    userInfo<span class="token punctuation">,</span>
    order
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="模块访问全局状态"><a href="#模块访问全局状态" class="header-anchor">#</a> 模块访问全局状态</h3> <h4 id="action-获取全局状态"><a href="#action-获取全局状态" class="header-anchor">#</a> action 获取全局状态</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Module <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vuex&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> createStore <span class="token operator">=</span> <span class="token operator">&lt;</span><span class="token constant">S</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token parameter">store<span class="token operator">:</span> Module<span class="token operator">&lt;</span><span class="token constant">S</span><span class="token punctuation">,</span> any<span class="token operator">&gt;</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> store
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">createStore</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  actions<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">incrementRootCount</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>state<span class="token punctuation">,</span> commit<span class="token punctuation">,</span> rootState<span class="token punctuation">,</span> rootGetters<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;全局状态: &quot;</span><span class="token punctuation">,</span> rootState<span class="token punctuation">)</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;全局计算: &quot;</span><span class="token punctuation">,</span> rootGetters<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="getters-获取全局状态"><a href="#getters-获取全局状态" class="header-anchor">#</a> getters 获取全局状态</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Module <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vuex&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> createStore <span class="token operator">=</span> <span class="token operator">&lt;</span><span class="token constant">S</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token parameter">store<span class="token operator">:</span> Module<span class="token operator">&lt;</span><span class="token constant">S</span><span class="token punctuation">,</span> any<span class="token operator">&gt;</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> store
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">createStore</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  getters<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">allCount</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> getters<span class="token punctuation">,</span> rootState</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;当前储存库: &quot;</span><span class="token punctuation">,</span> state<span class="token punctuation">)</span><span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;当前储存库计算: &quot;</span><span class="token punctuation">,</span> getters<span class="token punctuation">)</span><span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;全局储存库: &quot;</span><span class="token punctuation">,</span> rootState<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="vuex-组件-文件中使用"><a href="#vuex-组件-文件中使用" class="header-anchor">#</a> Vuex 组件 / 文件中使用</h3> <h4 id="字符串模板访问-state"><a href="#字符串模板访问-state" class="header-anchor">#</a> 字符串模板访问 state</h4> <p><code>Vuex</code>在<code>use</code>中引入后，全局属性将多出一个<code>$store</code>的属性，在<code>ComponentAPI</code>中，<code>this</code>并不能访问，但字符串模板可以访问。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 任意组件 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{{ $store.state.cliNum }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{{ $store.getters.type }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="组件访问-state"><a href="#组件访问-state" class="header-anchor">#</a> 组件访问 state</h4> <p>在<code>Vue3</code>中，<code>this</code>被废弃，获取当前状态由<code>useStore</code>钩子获取。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vuex&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">useStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>store<span class="token punctuation">.</span>state<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>store<span class="token punctuation">.</span>getters<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="字符串模板调用-actions-函数"><a href="#字符串模板调用-actions-函数" class="header-anchor">#</a> 字符串模板调用 actions 函数</h4> <p><code>$store.dispatch</code>会调用<code>Vuex</code>中的<code>actions</code>函数，第一个参数传入函数名称，第二个参数传入自定义参数，这里需要注意，<code>$sotre.dispatch</code>只能传输两个参数。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 任意组件 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$store.dispatch(<span class="token punctuation">'</span>qaq<span class="token punctuation">'</span>, [a,b,c])<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>+<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="组件调用-actions-函数"><a href="#组件调用-actions-函数" class="header-anchor">#</a> 组件调用 actions 函数</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vuex&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">useStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'qaq'</span><span class="token punctuation">,</span> <span class="token number">5555</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="第三方插件-veevalidate-4-0"><a href="#第三方插件-veevalidate-4-0" class="header-anchor">#</a> 第三方插件 VeeValidate 4.0</h2> <p>VeeValidate 是基于Vue的表单验证扩展，熟悉后可以很容易的设置声明式验证。带有直观的API和较小的占用空间，可以很快速的构建的表单验证。体积小，复杂度低，且可和任意的UI组件库搭配使用。带有内置规则，拥有全球化语音环境，是一块十分优秀的插件。</p> <p>安装：<code>npm i vee-validate@next --save</code></p> <h3 id="全局验证器"><a href="#全局验证器" class="header-anchor">#</a> 全局验证器</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// plugins/vee-validate.ts (需初始化执行)</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> defineRule <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vee-validate'</span><span class="token punctuation">;</span>

<span class="token comment">// 添加必须项规则</span>
<span class="token function">defineRule</span><span class="token punctuation">(</span><span class="token string">'required'</span><span class="token punctuation">,</span> <span class="token parameter">value</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>value <span class="token operator">||</span> <span class="token operator">!</span>value<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'该选项为必选'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 添加邮箱规则</span>
<span class="token function">defineRule</span><span class="token punctuation">(</span><span class="token string">'email'</span><span class="token punctuation">,</span> <span class="token parameter">value</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 字段为空, 应通过</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>value <span class="token operator">||</span> <span class="token operator">!</span>value<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 监测是否是邮箱</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'邮箱格式不正确'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="使用全局验证器"><a href="#使用全局验证器" class="header-anchor">#</a> 使用全局验证器</h3> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>vee-from</span> <span class="token attr-name">@submit</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onSubmit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ isSubmitting }<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>field</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">as</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>input<span class="token punctuation">&quot;</span></span> <span class="token attr-name">rules</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>required<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>field</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>email<span class="token punctuation">&quot;</span></span> <span class="token attr-name">as</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>input<span class="token punctuation">&quot;</span></span> <span class="token attr-name">rules</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>required|email<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">:disabled</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>isSubmitting<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ <span class="token punctuation">'</span>submitting<span class="token punctuation">'</span>: isSubmitting }<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Submit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>error-message</span> <span class="token attr-name">:name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>vee-from</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">// 引入并暴露 vee-validate 组件</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span> Field<span class="token punctuation">,</span> Form <span class="token keyword">as</span> VeeForm<span class="token punctuation">,</span> ErrorMessage <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vee-validate&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// 表单通过验证</span>
<span class="token keyword">const</span> <span class="token function-variable function">onSubmit</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">values<span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>values<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="第三方插件-elementui"><a href="#第三方插件-elementui" class="header-anchor">#</a> 第三方插件 ElementUI</h2> <p>#######</p> <p>#######</p> <h2 id="vue-常见问题-扩展"><a href="#vue-常见问题-扩展" class="header-anchor">#</a> Vue 常见问题 | 扩展</h2> <p>在 Vue 开发中，遇到的疑难杂症，与发现的 Vue 相关扩展。</p> <h3 id="路由级别权限管理"><a href="#路由级别权限管理" class="header-anchor">#</a> 路由级别权限管理</h3> <ol><li>定义好全部的路由地址以及映射地址</li> <li>通过用户不同，向后台请求不同的路由权限数据</li> <li>对用户权限做对比：请求数据 === 全部的路由，取出后添加路由配置</li></ol> <h3 id="按钮级别权限管理"><a href="#按钮级别权限管理" class="header-anchor">#</a> 按钮级别权限管理</h3> <ol><li>定义自定义指令，标签判断当前 route.mete 是否存在权限信息，不存在则移除DOM。</li></ol> <h3 id="虚拟节点创建-create-vnode"><a href="#虚拟节点创建-create-vnode" class="header-anchor">#</a> 虚拟节点创建 （create vnode）</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> h <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token comment">// 传入组件内容, 与组件 props 参数, 生成虚拟节点</span>
<span class="token keyword">const</span> vnode <span class="token operator">=</span> <span class="token function">h</span><span class="token punctuation">(</span>Component<span class="token punctuation">,</span> props<span class="token punctuation">)</span>

<span class="token comment">// 组件内容可为导入组件, 例如</span>
<span class="token keyword">import</span> Component <span class="token keyword">from</span> <span class="token string">'./Component.vue'</span>
<span class="token keyword">const</span> vnode <span class="token operator">=</span> <span class="token function">h</span><span class="token punctuation">(</span>Component<span class="token punctuation">,</span> props<span class="token punctuation">)</span>
<span class="token comment">// 也可为 template 例如</span>
<span class="token keyword">const</span> vnode <span class="token operator">=</span> <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">'&lt;div&gt;hello world!!&lt;/div&gt;'</span><span class="token punctuation">,</span> props<span class="token punctuation">)</span>
<span class="token comment">// 也可为节点的描述数据 例如</span>
<span class="token keyword">const</span> vnode <span class="token operator">=</span> <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">'app'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token function">h</span><span class="token punctuation">(</span><span class="token string">'span'</span><span class="token punctuation">,</span> <span class="token string">'我是 span'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="虚拟节点渲染-render-vnode"><a href="#虚拟节点渲染-render-vnode" class="header-anchor">#</a> 虚拟节点渲染 （render vnode）</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> h<span class="token punctuation">,</span> render <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token comment">// 渲染虚拟节点至真实节点上 ( 挂载组件 )</span>
<span class="token keyword">const</span> container <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span>
<span class="token function">render</span><span class="token punctuation">(</span><span class="token function">h</span><span class="token punctuation">(</span>Component<span class="token punctuation">,</span> props<span class="token punctuation">)</span><span class="token punctuation">,</span> container<span class="token punctuation">)</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>container<span class="token punctuation">.</span>firstElementChild<span class="token punctuation">)</span>
<span class="token comment">// 销毁真实节点的所有实例 ( 卸载组件 )</span>
<span class="token function">render</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> container<span class="token punctuation">)</span>
</code></pre></div><h3 id="基于瞬移组件-虚拟节点的模态调用封装"><a href="#基于瞬移组件-虚拟节点的模态调用封装" class="header-anchor">#</a> 基于瞬移组件|虚拟节点的模态调用封装</h3> <ol><li><p>在 props.ts 中定义组件内 Props 内容</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/** 模态框固定 props 参数, 用于调用模态框成功|关闭|销毁 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> modalProps <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// 是否展示组件</span>
  modelValue<span class="token operator">:</span> Boolean<span class="token punctuation">,</span>
  <span class="token comment">// 组件消失时(移除实例)</span>
  vanish<span class="token operator">:</span> Function<span class="token punctuation">,</span>
  <span class="token comment">// 组件调用成功事件</span>
  resolve<span class="token operator">:</span> Function<span class="token punctuation">,</span>
  <span class="token comment">// 组件调用失败事件</span>
  reject<span class="token operator">:</span> Function
<span class="token punctuation">}</span>

<span class="token comment">/** 组件内传入 props 参数, 用于模态框自定义功能 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> componentProps <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// 模态框是否开启多选功能</span>
  multiple<span class="token operator">:</span> Boolean
<span class="token punctuation">}</span>

<span class="token comment">/** 组件内所有 Props 参数, 合并参数 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> props <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token operator">...</span>modalProps<span class="token punctuation">,</span> <span class="token operator">...</span>componentProps<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>在 index.vue 中引入 props 类型</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> props <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./index'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  props
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scss<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p>在 utils.ts 中定义 renderInstance 方法（渲染实例）</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Component<span class="token punctuation">,</span> h<span class="token punctuation">,</span> render <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span>

<span class="token comment">/**
 * 渲染组件实例
 * @param Constructor 组件
 * @param props 组件参数
 * @returns 组件实例
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> renderInstance <span class="token operator">=</span> <span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token operator">=</span> Component<span class="token operator">&gt;</span><span class="token punctuation">(</span>Constructor<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> props<span class="token operator">:</span> Record<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">any</span><span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 创建组件容器, 这一步是必须的, 在销毁组件时会使用到</span>
  <span class="token keyword">const</span> container <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span>

  <span class="token comment">// 在 props 添加组件消失钩子, 移除当前实例, 将销毁方法提供给组件</span>
  <span class="token comment">// 这里不需要调用 document.body.removeChild(container.firstElementChild)</span>
  <span class="token comment">// 因为调用 render(null, container) 为我们完成了这项工作</span>
  props<span class="token punctuation">.</span><span class="token function-variable function">vanish</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> container<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 创建虚拟节点, 渲染组件</span>
  <span class="token keyword">const</span> vnode <span class="token operator">=</span> <span class="token function">h</span><span class="token punctuation">(</span>Constructor<span class="token punctuation">,</span> props<span class="token punctuation">)</span>
  <span class="token function">render</span><span class="token punctuation">(</span>vnode<span class="token punctuation">,</span> container<span class="token punctuation">)</span>

  <span class="token comment">// 添加子元素(组件)至父元素</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>container<span class="token punctuation">.</span>firstElementChild<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>container<span class="token punctuation">.</span>firstElementChild<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>在 index.ts 中定义 Modal 调用方法</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> ExtractPropTypes<span class="token punctuation">,</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span>
<span class="token keyword">import</span> Index <span class="token keyword">from</span> <span class="token string">'./index.vue'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> componentProps <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./props'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> renderInstance <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./utils&quot;</span>

<span class="token comment">/** 组件 Props 类型, ExtractPropTypes 可将 Constructor 转换为对应值类型 */</span>
<span class="token keyword">type</span> <span class="token class-name">Props</span> <span class="token operator">=</span> ExtractPropTypes<span class="token operator">&lt;</span><span class="token keyword">typeof</span> componentProps<span class="token operator">&gt;</span>

<span class="token comment">/** 组件调用 resolve 返回结果 */</span>
<span class="token keyword">type</span> <span class="token class-name">Result</span> <span class="token operator">=</span> <span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span><span class="token punctuation">[</span><span class="token punctuation">]</span>

<span class="token comment">/**
 * 模态框调用方法
 * @param props 
 * @returns {Promise}
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">Modal</span> <span class="token operator">=</span> <span class="token punctuation">(</span>props<span class="token operator">:</span> Props<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token builtin">Promise</span><span class="token operator">&lt;</span>Result<span class="token operator">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">renderInstance</span><span class="token punctuation">(</span>Index<span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token comment">// 这里 modelValue, 为了使组件可修改, 需要传入 ref</span>
      modelValue<span class="token operator">:</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token operator">...</span>props<span class="token punctuation">,</span> resolve<span class="token punctuation">,</span> reject
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>定义 index.vue 模态框组件基本逻辑</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!--
 * @Author: Mr.Mao
 * @Date: 2021-06-17 10:59:08
 * @LastEditTime: 2021-06-17 16:42:22
 * @Description: 
 * @LastEditors: Mr.Mao
 * @autograph: 任何一个傻子都能写出让电脑能懂的代码，而只有好的程序员可以写出让人能看懂的代码
--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>teleport</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>body<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- after-leave 组件动画结束时, 调用销毁组件(假如有的话) --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transition</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>fade<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@after-leave</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>vanish<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>base-model__mask<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-show</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>show<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>base-model__content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>我是模态框啦~~~<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
          <span class="token comment">&lt;!-- 插入自定义插槽 --&gt;</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>base-model__control<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onConfirm<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>确定<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onClone<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>关闭<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>transition</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>teleport</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent<span class="token punctuation">,</span> computed<span class="token punctuation">,</span> isRef<span class="token punctuation">,</span> nextTick<span class="token punctuation">,</span> watch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> props <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./props'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  props<span class="token punctuation">,</span>
  <span class="token function-variable function">setup</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> <span class="token punctuation">{</span> emit <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 组件显示的数据双向代理</span>
    <span class="token keyword">const</span> modelValue <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">&lt;</span>boolean<span class="token operator">&gt;</span>props<span class="token punctuation">.</span>modelValue<span class="token punctuation">,</span>
      <span class="token function-variable function">set</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'update:modelValue'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token comment">// Modal 方法调用传入 props 无法通过 emit 修改</span>
    <span class="token comment">// 所以假如传入直接是一个 ref 则直接使用</span>
    <span class="token keyword">const</span> show <span class="token operator">=</span> <span class="token function">isRef</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>modelValue<span class="token punctuation">)</span> <span class="token operator">?</span> props<span class="token punctuation">.</span>modelValue <span class="token operator">:</span> modelValue

    <span class="token comment">// 假如初始化为 true , 切换状态让动画正常显示</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>show<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      show<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token boolean">false</span>
      <span class="token function">nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> show<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 关闭事件, 调用 reject, 为了兼容模板上直接使用组件, 还要在调用一次 clone 事件</span>
    <span class="token keyword">const</span> <span class="token function-variable function">onClone</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      props<span class="token punctuation">.</span>reject<span class="token operator">?.</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'clone'</span><span class="token punctuation">)</span>
      show<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 确定事件, 调用 resolve, 为了兼容模板上直接使用组件, 还要在调用一次 confirm 事件</span>
    <span class="token keyword">const</span> <span class="token function-variable function">onConfirm</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      props<span class="token punctuation">.</span>resolve<span class="token operator">?.</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'confirm'</span><span class="token punctuation">)</span>
      show<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token punctuation">{</span> show<span class="token punctuation">,</span> onConfirm<span class="token punctuation">,</span> onClone <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scss<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.base-model__mask</span> <span class="token punctuation">{</span>
  <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>
  <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.4<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.base-model__content</span> <span class="token punctuation">{</span>
  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
  <span class="token property">border-radius</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 600px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #ffffff<span class="token punctuation">;</span>
  <span class="token property">top</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
  <span class="token property">left</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translate</span><span class="token punctuation">(</span>-50%<span class="token punctuation">,</span> -50%<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.base-model__control</span> <span class="token punctuation">{</span>
  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
  <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">bottom</span><span class="token punctuation">:</span> 20px<span class="token selector">;
  span</span> <span class="token punctuation">{</span>
    <span class="token property">margin-right</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/* 组件动画 start */</span>
<span class="token selector">.fade-enter-active,
.fade-leave-active</span> <span class="token punctuation">{</span>
  <span class="token property">transition</span><span class="token punctuation">:</span> opacity 0.2s<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.fade-enter-from,
.fade-leave-to</span> <span class="token punctuation">{</span>
  <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.fade-enter-top,
.fade-leave-from</span> <span class="token punctuation">{</span>
  <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">/* 组件动画 end */</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p>js 中直接调起使用</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Vue logo<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./assets/logo.png<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onClick<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Modal <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./components/Modal'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function-variable function">setup</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 点击调起模态框</span>
    <span class="token keyword">const</span> <span class="token function-variable function">onClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">Modal</span><span class="token punctuation">(</span><span class="token punctuation">{</span> multiple<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'模态框点击确认'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'模态框点击关闭'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> onClick <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p>在模板上使用</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Vue logo<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./assets/logo.png<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>show = true<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modal</span> <span class="token attr-name">@clone</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onClone<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@confirm</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onConfirm<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>show<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span>
    啦啦啦我是自定义内容
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modal</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent<span class="token punctuation">,</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> Modal <span class="token keyword">from</span> <span class="token string">'./components/Modal/index.vue'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  components<span class="token operator">:</span> <span class="token punctuation">{</span> Modal <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">setup</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> show <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> <span class="token function-variable function">onClone</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'模态框点击关闭'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">const</span> <span class="token function-variable function">onConfirm</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'模态框点击确认'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> onClone<span class="token punctuation">,</span> onConfirm<span class="token punctuation">,</span> show <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ol> <h3 id="基于异步组件-路由的全局异步加载组件"><a href="#基于异步组件-路由的全局异步加载组件" class="header-anchor">#</a> 基于异步组件|路由的全局异步加载组件</h3></div></section> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/27-vue2-jian-jin-shi-qian-duan-kuang-jia-kai-fa.html" class="prev">
            Vue2 渐进式前端框架开发
          </a></span> <span class="next"><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/29-axios-jie-kou-qing-qiu-ku.html">
            axios 接口请求库
          </a></span></p></div> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:12rem;" data-v-70334359><li class="level-2" data-v-70334359><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/28-vue3-jian-jin-shi-qian-duan-kuang-jia-kai-fa.html#vue3-简述" class="sidebar-link reco-side-vue3-简述" data-v-70334359>Vue3 简述</a></li><li class="level-3" data-v-70334359><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/28-vue3-jian-jin-shi-qian-duan-kuang-jia-kai-fa.html#vue3-的一些新特性" class="sidebar-link reco-side-vue3-的一些新特性" data-v-70334359>Vue3 的一些新特性</a></li><li class="level-3" data-v-70334359><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/28-vue3-jian-jin-shi-qian-duan-kuang-jia-kai-fa.html#全局-api-的重大更改" class="sidebar-link reco-side-全局-api-的重大更改" data-v-70334359>全局 API 的重大更改</a></li><li class="level-3" data-v-70334359><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/28-vue3-jian-jin-shi-qian-duan-kuang-jia-kai-fa.html#模板指令的重大更改" class="sidebar-link reco-side-模板指令的重大更改" data-v-70334359>模板指令的重大更改</a></li><li class="level-3" data-v-70334359><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/28-vue3-jian-jin-shi-qian-duan-kuang-jia-kai-fa.html#异步组件的重大更改" class="sidebar-link reco-side-异步组件的重大更改" data-v-70334359>异步组件的重大更改</a></li><li class="level-3" data-v-70334359><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/28-vue3-jian-jin-shi-qian-duan-kuang-jia-kai-fa.html#移除-api" class="sidebar-link reco-side-移除-api" data-v-70334359>移除 API</a></li><li class="level-3" data-v-70334359><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/28-vue3-jian-jin-shi-qian-duan-kuang-jia-kai-fa.html#支持的库" class="sidebar-link reco-side-支持的库" data-v-70334359>支持的库</a></li><li class="level-2" data-v-70334359><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/28-vue3-jian-jin-shi-qian-duan-kuang-jia-kai-fa.html#vue-基础命令-对象" class="sidebar-link reco-side-vue-基础命令-对象" data-v-70334359>Vue 基础命令&amp;对象</a></li><li class="level-3" data-v-70334359><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/28-vue3-jian-jin-shi-qian-duan-kuang-jia-kai-fa.html#vue-html指令" class="sidebar-link reco-side-vue-html指令" data-v-70334359>Vue-html指令</a></li><li class="level-3" data-v-70334359><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/28-vue3-jian-jin-shi-qian-duan-kuang-jia-kai-fa.html#vue-切换显示动画" class="sidebar-link reco-side-vue-切换显示动画" data-v-70334359>Vue 切换显示动画</a></li><li class="level-3" data-v-70334359><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/28-vue3-jian-jin-shi-qian-duan-kuang-jia-kai-fa.html#vue-括号表达式" class="sidebar-link reco-side-vue-括号表达式" data-v-70334359>Vue 括号表达式</a></li><li class="level-3" data-v-70334359><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/28-vue3-jian-jin-shi-qian-duan-kuang-jia-kai-fa.html#vue-事件修饰符" class="sidebar-link reco-side-vue-事件修饰符" data-v-70334359>Vue 事件修饰符</a></li><li class="level-3" data-v-70334359><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/28-vue3-jian-jin-shi-qian-duan-kuang-jia-kai-fa.html#vue-按键修饰符" class="sidebar-link reco-side-vue-按键修饰符" data-v-70334359>Vue 按键修饰符</a></li><li class="level-3" data-v-70334359><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/28-vue3-jian-jin-shi-qian-duan-kuang-jia-kai-fa.html#vue-定义响应式数据" class="sidebar-link reco-side-vue-定义响应式数据" data-v-70334359>Vue 定义响应式数据</a></li><li class="level-3" data-v-70334359><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/28-vue3-jian-jin-shi-qian-duan-kuang-jia-kai-fa.html#vue-外置组合函数" class="sidebar-link reco-side-vue-外置组合函数" data-v-70334359>Vue 外置组合函数</a></li><li class="level-3" data-v-70334359><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/28-vue3-jian-jin-shi-qian-duan-kuang-jia-kai-fa.html#composition-组合式-api" class="sidebar-link reco-side-composition-组合式-api" data-v-70334359>Composition 组合式 API</a></li><li class="level-3" data-v-70334359><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/28-vue3-jian-jin-shi-qian-duan-kuang-jia-kai-fa.html#provide-inject-声明注入" class="sidebar-link reco-side-provide-inject-声明注入" data-v-70334359>Provide / Inject 声明注入</a></li><li class="level-3" data-v-70334359><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/28-vue3-jian-jin-shi-qian-duan-kuang-jia-kai-fa.html#mixin-混合合并" class="sidebar-link reco-side-mixin-混合合并" data-v-70334359>Mixin 混合合并</a></li><li class="level-2" data-v-70334359><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/28-vue3-jian-jin-shi-qian-duan-kuang-jia-kai-fa.html#vue-实例对象生命周期" class="sidebar-link reco-side-vue-实例对象生命周期" data-v-70334359>Vue 实例对象生命周期</a></li><li class="level-3" data-v-70334359><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/28-vue3-jian-jin-shi-qian-duan-kuang-jia-kai-fa.html#生命周期流程" class="sidebar-link reco-side-生命周期流程" data-v-70334359>生命周期流程</a></li><li class="level-3" data-v-70334359><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/28-vue3-jian-jin-shi-qian-duan-kuang-jia-kai-fa.html#对比-vue2-x-的声明周期" class="sidebar-link reco-side-对比-vue2-x-的声明周期" data-v-70334359>对比 Vue2.x 的声明周期</a></li><li class="level-3" data-v-70334359><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/28-vue3-jian-jin-shi-qian-duan-kuang-jia-kai-fa.html#vue生命周期函数" class="sidebar-link reco-side-vue生命周期函数" data-v-70334359>Vue生命周期函数</a></li><li class="level-2" data-v-70334359><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/28-vue3-jian-jin-shi-qian-duan-kuang-jia-kai-fa.html#vue-自定义命令" class="sidebar-link reco-side-vue-自定义命令" data-v-70334359>Vue 自定义命令</a></li><li class="level-3" data-v-70334359><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/28-vue3-jian-jin-shi-qian-duan-kuang-jia-kai-fa.html#vue所有实例注册" class="sidebar-link reco-side-vue所有实例注册" data-v-70334359>Vue所有实例注册</a></li><li class="level-3" data-v-70334359><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/28-vue3-jian-jin-shi-qian-duan-kuang-jia-kai-fa.html#vue单个实例注册" class="sidebar-link reco-side-vue单个实例注册" data-v-70334359>Vue单个实例注册</a></li><li class="level-3" data-v-70334359><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/28-vue3-jian-jin-shi-qian-duan-kuang-jia-kai-fa.html#使用自定义标签属性" class="sidebar-link reco-side-使用自定义标签属性" data-v-70334359>使用自定义标签属性</a></li><li class="level-3" data-v-70334359><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/28-vue3-jian-jin-shi-qian-duan-kuang-jia-kai-fa.html#vue命令生命周期执行" class="sidebar-link reco-side-vue命令生命周期执行" data-v-70334359>Vue命令生命周期执行</a></li><li class="level-2" data-v-70334359><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/28-vue3-jian-jin-shi-qian-duan-kuang-jia-kai-fa.html#vue-源码分析" class="sidebar-link reco-side-vue-源码分析" data-v-70334359>Vue 源码分析</a></li><li class="level-2" data-v-70334359><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/28-vue3-jian-jin-shi-qian-duan-kuang-jia-kai-fa.html#vue-面向组件编程" class="sidebar-link reco-side-vue-面向组件编程" data-v-70334359>Vue 面向组件编程</a></li><li class="level-3" data-v-70334359><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/28-vue3-jian-jin-shi-qian-duan-kuang-jia-kai-fa.html#脚手架搭建环境" class="sidebar-link reco-side-脚手架搭建环境" data-v-70334359>脚手架搭建环境</a></li><li class="level-3" data-v-70334359><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/28-vue3-jian-jin-shi-qian-duan-kuang-jia-kai-fa.html#组件基本架构-define" class="sidebar-link reco-side-组件基本架构-define" data-v-70334359>组件基本架构(define)</a></li><li class="level-3" data-v-70334359><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/28-vue3-jian-jin-shi-qian-duan-kuang-jia-kai-fa.html#组件基本架构-setup" class="sidebar-link reco-side-组件基本架构-setup" data-v-70334359>组件基本架构(setup)</a></li><li class="level-2" data-v-70334359><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/28-vue3-jian-jin-shi-qian-duan-kuang-jia-kai-fa.html#父子组件间通信" class="sidebar-link reco-side-父子组件间通信" data-v-70334359>父子组件间通信</a></li><li class="level-3" data-v-70334359><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/28-vue3-jian-jin-shi-qian-duan-kuang-jia-kai-fa.html#子接收父数据-define" class="sidebar-link reco-side-子接收父数据-define" data-v-70334359>子接收父数据(define)</a></li><li class="level-3" data-v-70334359><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/28-vue3-jian-jin-shi-qian-duan-kuang-jia-kai-fa.html#子接收父数据-setup" class="sidebar-link reco-side-子接收父数据-setup" data-v-70334359>子接收父数据(setup)</a></li><li class="level-3" data-v-70334359><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/28-vue3-jian-jin-shi-qian-duan-kuang-jia-kai-fa.html#子接受父标签" class="sidebar-link reco-side-子接受父标签" data-v-70334359>子接受父标签</a></li><li class="level-3" data-v-70334359><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/28-vue3-jian-jin-shi-qian-duan-kuang-jia-kai-fa.html#父接受子参数" class="sidebar-link reco-side-父接受子参数" data-v-70334359>父接受子参数</a></li><li class="level-2" data-v-70334359><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/28-vue3-jian-jin-shi-qian-duan-kuang-jia-kai-fa.html#子组件间通信" class="sidebar-link reco-side-子组件间通信" data-v-70334359>子组件间通信</a></li><li class="level-3" data-v-70334359><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/28-vue3-jian-jin-shi-qian-duan-kuang-jia-kai-fa.html#props通信" class="sidebar-link reco-side-props通信" data-v-70334359>props通信</a></li><li class="level-3" data-v-70334359><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/28-vue3-jian-jin-shi-qian-duan-kuang-jia-kai-fa.html#消息订阅系统" class="sidebar-link reco-side-消息订阅系统" data-v-70334359>消息订阅系统</a></li><li class="level-2" data-v-70334359><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/28-vue3-jian-jin-shi-qian-duan-kuang-jia-kai-fa.html#瞬移与异步组件" class="sidebar-link reco-side-瞬移与异步组件" data-v-70334359>瞬移与异步组件</a></li><li class="level-3" data-v-70334359><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/28-vue3-jian-jin-shi-qian-duan-kuang-jia-kai-fa.html#teleport-瞬移组件" class="sidebar-link reco-side-teleport-瞬移组件" data-v-70334359>Teleport 瞬移组件</a></li><li class="level-3" data-v-70334359><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/28-vue3-jian-jin-shi-qian-duan-kuang-jia-kai-fa.html#suspense-异步组件" class="sidebar-link reco-side-suspense-异步组件" data-v-70334359>Suspense 异步组件</a></li><li class="level-2" data-v-70334359><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/28-vue3-jian-jin-shi-qian-duan-kuang-jia-kai-fa.html#路由组件编程" class="sidebar-link reco-side-路由组件编程" data-v-70334359>路由组件编程</a></li><li class="level-3" data-v-70334359><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/28-vue3-jian-jin-shi-qian-duan-kuang-jia-kai-fa.html#vue-路由管理器" class="sidebar-link reco-side-vue-路由管理器" data-v-70334359>Vue 路由管理器</a></li><li class="level-3" data-v-70334359><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/28-vue3-jian-jin-shi-qian-duan-kuang-jia-kai-fa.html#组件中操作路由" class="sidebar-link reco-side-组件中操作路由" data-v-70334359>组件中操作路由</a></li><li class="level-3" data-v-70334359><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/28-vue3-jian-jin-shi-qian-duan-kuang-jia-kai-fa.html#路由跳转时传入参数" class="sidebar-link reco-side-路由跳转时传入参数" data-v-70334359>路由跳转时传入参数</a></li><li class="level-3" data-v-70334359><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/28-vue3-jian-jin-shi-qian-duan-kuang-jia-kai-fa.html#监听路由参数变化" class="sidebar-link reco-side-监听路由参数变化" data-v-70334359>监听路由参数变化</a></li><li class="level-3" data-v-70334359><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/28-vue3-jian-jin-shi-qian-duan-kuang-jia-kai-fa.html#导航守卫-路由拦截器" class="sidebar-link reco-side-导航守卫-路由拦截器" data-v-70334359>导航守卫(路由拦截器)</a></li><li class="level-3" data-v-70334359><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/28-vue3-jian-jin-shi-qian-duan-kuang-jia-kai-fa.html#当前路由路队列信息-matched" class="sidebar-link reco-side-当前路由路队列信息-matched" data-v-70334359>当前路由路队列信息（matched）</a></li><li class="level-3" data-v-70334359><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/28-vue3-jian-jin-shi-qian-duan-kuang-jia-kai-fa.html#动态路由添加-addroute" class="sidebar-link reco-side-动态路由添加-addroute" data-v-70334359>动态路由添加（addRoute）</a></li><li class="level-3" data-v-70334359><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/28-vue3-jian-jin-shi-qian-duan-kuang-jia-kai-fa.html#将-props-传递给路由组件" class="sidebar-link reco-side-将-props-传递给路由组件" data-v-70334359>将 props 传递给路由组件</a></li><li class="level-2" data-v-70334359><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/28-vue3-jian-jin-shi-qian-duan-kuang-jia-kai-fa.html#vuex-集中式状态管理" class="sidebar-link reco-side-vuex-集中式状态管理" data-v-70334359>Vuex 集中式状态管理</a></li><li class="level-3" data-v-70334359><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/28-vue3-jian-jin-shi-qian-duan-kuang-jia-kai-fa.html#简单store状态管理" class="sidebar-link reco-side-简单store状态管理" data-v-70334359>简单store状态管理</a></li><li class="level-3" data-v-70334359><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/28-vue3-jian-jin-shi-qian-duan-kuang-jia-kai-fa.html#模块化状态管理" class="sidebar-link reco-side-模块化状态管理" data-v-70334359>模块化状态管理</a></li><li class="level-3" data-v-70334359><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/28-vue3-jian-jin-shi-qian-duan-kuang-jia-kai-fa.html#模块访问全局状态" class="sidebar-link reco-side-模块访问全局状态" data-v-70334359>模块访问全局状态</a></li><li class="level-3" data-v-70334359><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/28-vue3-jian-jin-shi-qian-duan-kuang-jia-kai-fa.html#vuex-组件-文件中使用" class="sidebar-link reco-side-vuex-组件-文件中使用" data-v-70334359>Vuex 组件 / 文件中使用</a></li><li class="level-2" data-v-70334359><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/28-vue3-jian-jin-shi-qian-duan-kuang-jia-kai-fa.html#第三方插件-veevalidate-4-0" class="sidebar-link reco-side-第三方插件-veevalidate-4-0" data-v-70334359>第三方插件 VeeValidate 4.0</a></li><li class="level-3" data-v-70334359><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/28-vue3-jian-jin-shi-qian-duan-kuang-jia-kai-fa.html#全局验证器" class="sidebar-link reco-side-全局验证器" data-v-70334359>全局验证器</a></li><li class="level-3" data-v-70334359><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/28-vue3-jian-jin-shi-qian-duan-kuang-jia-kai-fa.html#使用全局验证器" class="sidebar-link reco-side-使用全局验证器" data-v-70334359>使用全局验证器</a></li><li class="level-2" data-v-70334359><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/28-vue3-jian-jin-shi-qian-duan-kuang-jia-kai-fa.html#第三方插件-elementui" class="sidebar-link reco-side-第三方插件-elementui" data-v-70334359>第三方插件 ElementUI</a></li><li class="level-2" data-v-70334359><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/28-vue3-jian-jin-shi-qian-duan-kuang-jia-kai-fa.html#vue-常见问题-扩展" class="sidebar-link reco-side-vue-常见问题-扩展" data-v-70334359>Vue 常见问题 | 扩展</a></li><li class="level-3" data-v-70334359><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/28-vue3-jian-jin-shi-qian-duan-kuang-jia-kai-fa.html#路由级别权限管理" class="sidebar-link reco-side-路由级别权限管理" data-v-70334359>路由级别权限管理</a></li><li class="level-3" data-v-70334359><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/28-vue3-jian-jin-shi-qian-duan-kuang-jia-kai-fa.html#按钮级别权限管理" class="sidebar-link reco-side-按钮级别权限管理" data-v-70334359>按钮级别权限管理</a></li><li class="level-3" data-v-70334359><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/28-vue3-jian-jin-shi-qian-duan-kuang-jia-kai-fa.html#虚拟节点创建-create-vnode" class="sidebar-link reco-side-虚拟节点创建-create-vnode" data-v-70334359>虚拟节点创建 （create vnode）</a></li><li class="level-3" data-v-70334359><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/28-vue3-jian-jin-shi-qian-duan-kuang-jia-kai-fa.html#虚拟节点渲染-render-vnode" class="sidebar-link reco-side-虚拟节点渲染-render-vnode" data-v-70334359>虚拟节点渲染 （render vnode）</a></li><li class="level-3" data-v-70334359><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/28-vue3-jian-jin-shi-qian-duan-kuang-jia-kai-fa.html#基于瞬移组件-虚拟节点的模态调用封装" class="sidebar-link reco-side-基于瞬移组件-虚拟节点的模态调用封装" data-v-70334359>基于瞬移组件|虚拟节点的模态调用封装</a></li><li class="level-3" data-v-70334359><a href="/mao-blog/ruan-jian-kai-fa/qian-duan-bi-ji/28-vue3-jian-jin-shi-qian-duan-kuang-jia-kai-fa.html#基于异步组件-路由的全局异步加载组件" class="sidebar-link reco-side-基于异步组件-路由的全局异步加载组件" data-v-70334359>基于异步组件|路由的全局异步加载组件</a></li></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div><APlayer audio="" fixed="true" mini="true" autoplay="autoplay" theme="#b7daff" loop="loop" order="random" preload="auto" volume="0.15" mutex="true" lrc-type="0" list-max-height="250" storage-name="vuepress-plugin-meting" id="aplayer-fixed"></APlayer><div></div><div id="live2d-widget" class="live2d-widget-container" style="position:fixed;right:65px;bottom:-55px;width:135px;height:300px;z-index:99999;opacity:0.8;pointer-events:none;"><canvas id="live2d_canvas" width="135" height="300" class="live2d_canvas" style="position:absolute;left:0px;top:0px;width:135px;height:300px;"></canvas></div></div></div>
    <script src="/mao-blog/assets/js/app.19e1b50c.js" defer></script><script src="/mao-blog/assets/js/4.512e8a4d.js" defer></script><script src="/mao-blog/assets/js/1.6b005ada.js" defer></script><script src="/mao-blog/assets/js/25.bccb3f04.js" defer></script>
  </body>
</html>
